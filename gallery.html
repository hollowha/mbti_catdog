<!DOCTYPE html>
<html lang="zh-Hant" data-lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ±ğŸ¶ MBTIå¯µç‰©åœ–é‘‘ | Pet Gallery</title>
  <meta name="description" content="æ¢ç´¢æ‰€æœ‰64ç¨®MBTIå¯µç‰©æ€§æ ¼ï¼ŒåŒ…å«32ç¨®è²“å’ªå’Œ32ç¨®ç‹—ç‹—å“ç¨®çš„å®Œæ•´åœ–é‘‘">
  
  <!-- Favicon -->
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
  
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Caveat:wght@400;600;700&family=Kalam:wght@300;400;700&family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
  
  <style>
    :root {
      --gradient-primary: linear-gradient(135deg, #D2B48C 0%, #BC9A6A 100%);
      --gradient-secondary: linear-gradient(135deg, #F4A7B9 0%, #E8A598 100%);
      --gradient-accent: linear-gradient(135deg, #D4C4A8 0%, #D4C4A8 100%);
      --gradient-warm: linear-gradient(135deg, #F5E6D3 0%, #E8D5B7 100%);
      --bg-color: #FDF6E3;
      --card-bg: rgba(252, 248, 227, 0.9);
      --text-primary: #8B4513;
      --text-secondary: #A0522D;
      --text-accent: #D2691E;
      --border-color: rgba(210, 180, 140, 0.3);
      --shadow-soft: 0 8px 32px rgba(139, 69, 19, 0.1);
      --shadow-hover: 0 15px 35px rgba(139, 69, 19, 0.15);
      --milktea-light: #F7F3E9;
      --milktea-medium: #E6D7C3;
      --milktea-dark: #D2B48C;
      --pink-accent: #F4A7B9;
      --khaki-accent: #C3B091;
      --border-radius: 20px;
      --animation-speed: 0.3s;
    }

    * { 
      box-sizing: border-box; 
      margin: 0;
      padding: 0;
    }

    html {
      overflow-y: scroll;
    }

    body {
      font-family: 'Inter', 'Noto Sans TC', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      background-attachment: fixed;
      color: var(--text-primary);
      min-height: 100vh;
      line-height: 1.6;
      position: relative;
      overflow-x: hidden;
      padding: 80px 20px 20px 20px;
    }

    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: 
        radial-gradient(circle at 20% 50%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 40% 80%, rgba(255, 255, 255, 0.1) 0%, transparent 50%);
      pointer-events: none;
      z-index: -1;
    }

    /* Header */
    .header {
      text-align: center;
      margin-bottom: 40px;
      background: var(--card-bg);
      backdrop-filter: blur(20px);
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius);
      box-shadow: var(--shadow-soft);
      padding: 40px 30px;
      animation: slideUp 0.8s ease-out;
    }

    .header h1 {
      font-family: 'Caveat', 'Noto Sans TC', cursive;
      font-size: clamp(2.5rem, 6vw, 4rem);
      font-weight: 700;
      background: var(--gradient-primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 12px;
      letter-spacing: -0.02em;
    }

    .header .subtitle {
      font-family: 'Kalam', 'Noto Sans TC', cursive;
      font-size: 1.1rem;
      color: var(--text-secondary);
      font-weight: 400;
      margin-bottom: 20px;
    }

    /* Navigation */
    .nav-buttons {
      display: flex;
      gap: 15px;
      justify-content: center;
      flex-wrap: wrap;
      margin-top: 20px;
    }

    .nav-btn {
      padding: 12px 24px;
      background: var(--gradient-primary);
      color: white;
      border: none;
      border-radius: 25px;
      font-family: 'Kalam', 'Noto Sans TC', cursive;
      font-weight: 600;
      text-decoration: none;
      transition: all var(--animation-speed) ease;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      box-shadow: var(--shadow-soft);
    }

    .nav-btn:hover {
      transform: translateY(-2px) scale(1.02);
      box-shadow: var(--shadow-hover);
    }

    /* Filter Section */
    .filter-section {
      background: var(--card-bg);
      backdrop-filter: blur(20px);
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius);
      box-shadow: var(--shadow-soft);
      padding: 30px;
      margin-bottom: 40px;
      animation: slideUp 0.8s ease-out 0.1s both;
    }

    .filter-tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      justify-content: center;
      flex-wrap: wrap;
    }

    .filter-tab {
      padding: 10px 20px;
      background: var(--milktea-light);
      border: 2px solid var(--border-color);
      border-radius: 25px;
      cursor: pointer;
      transition: all var(--animation-speed) ease;
      font-weight: 600;
    }

    .filter-tab.active {
      background: var(--gradient-secondary);
      color: white;
      border-color: var(--pink-accent);
    }

    .filter-tab:hover {
      background: var(--pink-accent);
      color: white;
      transform: translateY(-2px);
    }

    /* MBTI é¡å‹æŒ‰éˆ•ç‰¹æ®Šæ¨£å¼ */
    .filter-tab[onclick*="NT"] {
      background: linear-gradient(135deg, #E3F2FD 0%, #BBDEFB 100%);
      color: #1565C0;
      border-color: #1976D2;
    }

    .filter-tab[onclick*="NF"] {
      background: linear-gradient(135deg, #F3E5F5 0%, #E1BEE7 100%);
      color: #6A1B9A;
      border-color: #7B1FA2;
    }

    .filter-tab[onclick*="SJ"] {
      background: linear-gradient(135deg, #E8F5E8 0%, #C8E6C8 100%);
      color: #2E7D32;
      border-color: #388E3C;
    }

    .filter-tab[onclick*="SP"] {
      background: linear-gradient(135deg, #FFE5E5 0%, #FFCDD2 100%);
      color: #C62828;
      border-color: #D32F2F;
    }

    /* ç”¨æˆ¶å…ƒç´ æŒ‰éˆ•ç‰¹æ®Šæ¨£å¼ */
    #userElementTab {
      background: linear-gradient(135deg, var(--gradient-warm) 0%, var(--pink-accent) 100%);
      color: white;
      border: 2px solid var(--pink-accent);
      position: relative;
      overflow: hidden;
    }

    #userElementTab::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255, 255, 255, 0.3) 0%, transparent 70%);
      animation: rotate 3s linear infinite;
      pointer-events: none;
    }

    #userElementTab:hover {
      background: linear-gradient(135deg, var(--pink-accent) 0%, #E8A598 100%);
      transform: translateY(-2px) scale(1.05);
      box-shadow: 0 8px 25px rgba(244, 167, 185, 0.4);
    }

    @keyframes rotate {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    .user-pet-section {
      background: var(--gradient-warm);
      border: 2px solid var(--pink-accent);
      border-radius: 15px;
      padding: 20px;
      margin-bottom: 20px;
      text-align: center;
      display: none;
    }

    .user-pet-section.show {
      display: block;
    }

    /* Gallery Grid */
    .gallery-container {
      max-width: 1400px;
      margin: 0 auto;
    }

    .gallery-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 25px;
      margin-bottom: 40px;
    }

    /* Pet Card */
    .pet-card {
      background: var(--card-bg);
      backdrop-filter: blur(20px);
      border: 2px solid var(--border-color);
      border-radius: var(--border-radius);
      box-shadow: var(--shadow-soft);
      overflow: hidden;
      transition: all var(--animation-speed) ease;
      cursor: pointer;
      position: relative;
      animation: fadeInUp 0.6s ease-out forwards;
      opacity: 0;
      transform: translateY(30px);
    }

    .pet-card:hover {
      transform: translateY(-10px) scale(1.02);
      box-shadow: var(--shadow-hover);
      border-color: var(--pink-accent);
    }

    .pet-card.user-pet {
      border: 3px solid var(--pink-accent);
      background: linear-gradient(135deg, var(--card-bg) 0%, rgba(244, 167, 185, 0.1) 100%);
    }

    .pet-card.user-pet::before {
      content: 'â­ ä½ çš„å¯µç‰© Your Pet â­';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      background: var(--gradient-secondary);
      color: white;
      padding: 5px;
      font-size: 0.8rem;
      font-weight: 600;
      text-align: center;
      z-index: 2;
    }

    .pet-image {
      width: 100%;
      height: 200px;
      object-fit: contain;
      background: rgba(255, 255, 255, 0.5);
      transition: transform var(--animation-speed) ease;
    }

    .pet-card:hover .pet-image {
      transform: scale(1.05);
    }

    .pet-info {
      padding: 20px;
      padding-top: 15px;
    }

    .pet-card.user-pet .pet-info {
      padding-top: 25px;
    }

    .pet-species {
      font-family: 'Caveat', 'Noto Sans TC', cursive;
      font-size: 1.4rem;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 5px;
      text-align: center;
    }

    .pet-mbti {
      display: inline-block;
      background: var(--gradient-primary);
      color: white;
      padding: 5px 12px;
      border-radius: 20px;
      font-size: 0.9rem;
      font-weight: 600;
      margin-bottom: 10px;
    }

    .pet-element {
      display: inline-block;
      padding: 3px 8px;
      border-radius: 12px;
      font-size: 0.8rem;
      font-weight: 500;
      margin-left: 8px;
    }

    .pet-element.fire { background: #FFE5E5; color: #D32F2F; }
    .pet-element.earth { background: #E8F5E8; color: #388E3C; }
    .pet-element.air { background: #E3F2FD; color: #1976D2; }
    .pet-element.water { background: #F3E5F5; color: #7B1FA2; }

    .pet-description {
      color: var(--text-secondary);
      font-size: 0.95rem;
      line-height: 1.5;
      margin-top: 10px;
      text-align: center;
    }

    .pet-type-badge {
      position: absolute;
      top: 15px;
      right: 15px;
      background: var(--gradient-accent);
      color: var(--text-primary);
      padding: 5px 10px;
      border-radius: 15px;
      font-size: 0.8rem;
      font-weight: 600;
    }

    /* Language Switcher */
    .language-switcher {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 1001;
      display: flex;
      gap: 8px;
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(10px);
      border-radius: 25px;
      padding: 8px;
      border: 1px solid var(--border-color);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .lang-btn {
      padding: 8px 16px;
      border: none;
      border-radius: 20px;
      background: transparent;
      color: var(--text-primary);
      cursor: pointer;
      transition: all 0.2s ease;
      font-weight: 500;
      font-size: 0.9rem;
    }

    .lang-btn.active {
      background: var(--gradient-primary);
      color: white;
    }

    /* Animations */
    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes fadeInUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      body {
        padding: 70px 15px 15px 15px;
      }

      .header {
        padding: 30px 20px;
      }

      .header h1 {
        font-size: clamp(2rem, 8vw, 3rem);
      }

      .gallery-grid {
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 20px;
      }

      .filter-section {
        padding: 20px;
      }

      .nav-buttons {
        gap: 10px;
      }

      .nav-btn {
        padding: 10px 18px;
        font-size: 0.9rem;
      }
    }

    @media (max-width: 480px) {
      .gallery-grid {
        grid-template-columns: 1fr;
        gap: 15px;
      }

      .filter-tabs {
        flex-direction: column;
        align-items: center;
        gap: 8px;
      }

      .filter-tab {
        width: 220px;
        text-align: center;
        padding: 12px 16px;
        font-size: 0.9rem;
      }

      /* MBTI æŒ‰éˆ•åœ¨æ‰‹æ©Ÿç‰ˆçš„ç‰¹æ®Šè™•ç† */
      .filter-tab[onclick*="NT"], 
      .filter-tab[onclick*="NF"], 
      .filter-tab[onclick*="SJ"], 
      .filter-tab[onclick*="SP"] {
        width: 240px;
        font-weight: 700;
      }

      #userElementTab {
        width: 250px;
        font-weight: 700;
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.02); }
        100% { transform: scale(1); }
      }

      .language-switcher {
        position: fixed;
        top: 10px;
        right: 10px;
        left: 10px;
        justify-content: center;
      }
    }

    /* Loading Animation */
    .loading {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 200px;
      font-size: 1.2rem;
      color: var(--text-secondary);
    }

    .loading::after {
      content: 'ğŸ¾';
      animation: bounce 1s infinite;
      margin-left: 10px;
    }

    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
      40% { transform: translateY(-10px); }
      60% { transform: translateY(-5px); }
    }

    /* Hidden elements for language switching */
    [data-zh], [data-en] {
      display: none;
    }

    html[data-lang="zh-TW"] [data-zh] {
      display: inline;
    }

    html[data-lang="en-US"] [data-en] {
      display: inline;
    }
  </style>
</head>
<body>
  <!-- Language Switcher -->
  <div class="language-switcher">
    <button class="lang-btn active" onclick="switchLanguage('zh-TW')" data-lang-code="zh-TW">
      <span data-zh>ç¹ä¸­</span>
      <span data-en>ç¹ä¸­</span>
    </button>
    <button class="lang-btn" onclick="switchLanguage('en-US')" data-lang-code="en-US">
      <span data-zh>English</span>
      <span data-en>English</span>
    </button>
  </div>

  <div class="gallery-container">
    <!-- Header -->
    <div class="header">
      <h1>
        <span data-zh>ğŸ±ğŸ¶ MBTIå¯µç‰©åœ–é‘‘</span>
        <span data-en>ğŸ±ğŸ¶ MBTI Pet Gallery</span>
      </h1>
      <p class="subtitle">
        <span data-zh>æ¢ç´¢64ç¨®ä¸åŒæ€§æ ¼çš„è²“å’ªå’Œç‹—ç‹—ï¼Œæ‰¾åˆ°æœ€é©åˆä½ çš„æ¯›å­©ä¼´ä¾¶</span>
        <span data-en>Explore 64 different personalities of cats and dogs, find your perfect furry companion</span>
      </p>
      
      <div class="nav-buttons">
        <a href="index.html" class="nav-btn">
          <span>âœ¨</span>
          <span data-zh>é–‹å§‹æ¸¬é©—</span>
          <span data-en>Take Quiz</span>
        </a>
        <button class="nav-btn" onclick="showUserPet()">
          <span>â­</span>
          <span data-zh>æˆ‘çš„å¯µç‰©</span>
          <span data-en>My Pet</span>
        </button>
      </div>
    </div>

    <!-- Filter Section -->
    <div class="filter-section">
      <!-- User Pet Display -->
      <div class="user-pet-section" id="userPetSection">
        <h3>
          <span data-zh>â­ ä½ çš„å°ˆå±¬å¯µç‰© â­</span>
          <span data-en>â­ Your Personal Pet â­</span>
        </h3>
        <div id="userPetDisplay"></div>
      </div>

      <div class="filter-tabs">
        <div class="filter-tab active" onclick="filterPets('all')">
          <span data-zh>å…¨éƒ¨ (64)</span>
          <span data-en>All (64)</span>
        </div>
        <div class="filter-tab" onclick="filterPets('cat')">
          <span data-zh>è²“å’ª (32)</span>
          <span data-en>Cats (32)</span>
        </div>
        <div class="filter-tab" onclick="filterPets('dog')">
          <span data-zh>ç‹—ç‹— (32)</span>
          <span data-en>Dogs (32)</span>
        </div>
        <div class="filter-tab" onclick="filterPets('NT')">
          <span data-zh>ç†æ€§å®¶ NT</span>
          <span data-en>Rationals NT</span>
        </div>
        <div class="filter-tab" onclick="filterPets('NF')">
          <span data-zh>ç†æƒ³å®¶ NF</span>
          <span data-en>Idealists NF</span>
        </div>
        <div class="filter-tab" onclick="filterPets('SJ')">
          <span data-zh>å®ˆè­·è€… SJ</span>
          <span data-en>Guardians SJ</span>
        </div>
        <div class="filter-tab" onclick="filterPets('SP')">
          <span data-zh>æ¢éšªå®¶ SP</span>
          <span data-en>Artisans SP</span>
        </div>
        <div class="filter-tab" id="userElementTab" onclick="filterPets('userElement')" style="display: none;">
          <span data-zh id="userElementTextZh">ä½ çš„å…ƒç´ </span>
          <span data-en id="userElementTextEn">Your Element</span>
        </div>
      </div>
    </div>

    <!-- Gallery Grid -->
    <div class="gallery-grid" id="galleryGrid">
      <div class="loading">
        <span data-zh>è¼‰å…¥ä¸­...</span>
        <span data-en>Loading...</span>
      </div>
    </div>
  </div>

  <script>
    let animalData = [];
    let currentFilter = 'all';
    let userPetData = null;

    // Load animal data
    async function loadAnimalData() {
      try {
        animalData = [
          {"mbti": "ISTJ", "element": "fire", "species": "è‹±åœ‹çŸ­æ¯›è²“", "species_en": "British Shorthair", "description": "ç©©é‡å»å¶çˆ¾ç†±æƒ…ï¼Œçµ¦ä½ å®‰å…¨æ„Ÿçš„å®ˆè­·è€…", "description_en": "Steady yet occasionally passionate, a guardian who gives you a sense of security", "image": "img2/british_shorthair_fire-removebg-preview.png"},
          {"mbti": "ISTJ", "element": "earth", "species": "è˜‡æ ¼è˜­æ‘ºè€³è²“", "species_en": "Scottish Fold", "description": "å®‰éœä¹–å·§ï¼Œæ˜¯ç©©å®šç”Ÿæ´»çš„æœ€ä½³å¤¥ä¼´", "description_en": "Quiet and well-behaved, the perfect companion for a stable life", "image": "img2/scottish_fold_earth-removebg-preview.png"},
          {"mbti": "ISTJ", "element": "air", "species": "ç¾åœ‹çŸ­æ¯›è²“", "species_en": "American Shorthair", "description": "ç†æ€§ä¸­å¸¶é»éˆæ´»ï¼Œèƒ½è¼•é¬†æ‡‰å°è®ŠåŒ–", "description_en": "Rational with flexibility, easily adapts to changes", "image": "img2/american_shorthair_air-removebg-preview.png"},
          {"mbti": "ISTJ", "element": "water", "species": "å–œé¦¬æ‹‰é›…è²“", "species_en": "Himalayan Cat", "description": "å…§æ–‚æº«å’Œï¼Œé»˜é»˜å®ˆè­·ä½ ", "description_en": "Reserved and gentle, silently protecting you", "image": "img2/himalayan_cat_water-removebg-preview.png"},
          {"mbti": "ISFJ", "element": "fire", "species": "å¸ƒå¶è²“", "species_en": "Ragdoll", "description": "ç†±æƒ…åˆè¦ªäººï¼Œæ˜¯æœ€æº«æš–çš„æ²»ç™’ç³»å¤¥ä¼´", "description_en": "Passionate and affectionate, the warmest healing companion", "image": "img2/ragdoll_fire-removebg-preview.png"},
          {"mbti": "ISFJ", "element": "earth", "species": "æ³¢æ–¯è²“", "species_en": "Persian Cat", "description": "é«˜é›…å®‰éœï¼Œå°ä½ å¿ èª ä¸æ¸", "description_en": "Elegant and quiet, utterly loyal to you", "image": "img2/persian_cat_earth-removebg-preview.png"},
          {"mbti": "ISFJ", "element": "air", "species": "æš¹ç¾…è²“", "species_en": "Siamese Cat", "description": "æ©Ÿæ™ºè²¼å¿ƒï¼Œç¸½åœ¨èº«é‚Šé»˜é»˜å®ˆè­·", "description_en": "Clever and caring, always silently protecting by your side", "image": "img2/siamese_cat_air-removebg-preview.png"},
          {"mbti": "ISFJ", "element": "water", "species": "ç·¬å› è²“", "species_en": "Maine Coon", "description": "å·¨å¤§å»æº«æŸ”ï¼Œçµ¦ä½ æ»¿æ»¿å®‰å…¨æ„Ÿ", "description_en": "Large yet gentle, giving you overwhelming sense of security", "image": "img2/maine_coon_water-removebg-preview.png"},
          {"mbti": "INFJ", "element": "fire", "species": "é˜¿æ¯”è¥¿å°¼äºè²“", "species_en": "Abyssinian Cat", "description": "ç†±æƒ…ä¸”æœ‰é ˜å°æ°£è³ªï¼Œå…§å¿ƒå»æµªæ¼«æ·±æƒ…", "description_en": "Passionate with leadership qualities, yet romantic and affectionate inside", "image": "img2/abyssinian_fire-removebg-preview.png"},
          {"mbti": "INFJ", "element": "earth", "species": "ä¿„ç¾…æ–¯è—è²“", "species_en": "Russian Blue", "description": "å„ªé›…ç¥ç§˜ï¼Œæ˜¯å…§æ–‚çš„ç†æƒ³ä¸»ç¾©è€…", "description_en": "Elegant and mysterious, a reserved idealist", "image": "img2/russian_blue_earth-removebg-preview.png"},
          {"mbti": "INFJ", "element": "air", "species": "æš¹ç¾…è²“", "species_en": "Siamese Cat", "description": "å‰µæ„ç„¡é™ï¼Œç¸½æœ‰å‡ºå…¶ä¸æ„çš„é»å­", "description_en": "Infinitely creative, always full of surprising ideas", "image": "img2/siamese_cat_creative-removebg-preview.png"},
          {"mbti": "INFJ", "element": "water", "species": "ç·¬ç”¸è²“", "species_en": "Burmese Cat", "description": "æ„Ÿæƒ…è±å¯Œï¼Œæº«æŸ”ç´°è†©ï¼Œå–œæ­¡æ·±åº¦é€£çµ", "description_en": "Emotionally rich, gentle and delicate, loves deep connections", "image": "img2/burmese_cat_water-removebg-preview.png"},
          {"mbti": "INTJ", "element": "fire", "species": "å­ŸåŠ æ‹‰è²“", "species_en": "Bengal Cat", "description": "é‡æ€§åè¶³ï¼Œå»æš—è—ç­–ç•¥ï¼Œæ˜¯å†’éšªå®¶å‹æ€è€ƒè€…", "description_en": "Wild and energetic, yet strategic, an adventurous thinker", "image": "img2/bengal_cat_fire-removebg-preview.png"},
          {"mbti": "INTJ", "element": "earth", "species": "ç•°åœ‹çŸ­æ¯›è²“", "species_en": "Exotic Shorthair", "description": "ç©©é‡è°æ…§ï¼Œå†·éœè¨ˆç•«å‹äººæ ¼", "description_en": "Steady and intelligent, calm and strategic personality", "image": "img2/exotic_shorthair_earth-removebg-preview.png"},
          {"mbti": "INTJ", "element": "air", "species": "æš¹ç¾…è²“", "species_en": "Siamese Cat", "description": "å°å·§éˆæ´»ï¼Œæ“…é•·ç­–ç•¥ï¼ŒæŒæ¡å…¨å±€", "description_en": "Small and agile, strategic and good at controlling the whole situation", "image": "img2/siamese_cat_strategic-removebg-preview.png"},
          {"mbti": "INTJ", "element": "water", "species": "æ–¯èŠ¬å…‹æ–¯è²“", "species_en": "Sphynx Cat", "description": "ç¥ç§˜å†·é…·ï¼Œå»å°è¦ªè¿‘çš„äººå±•ç¾æŸ”æƒ…", "description_en": "Mysterious and cool, yet shows tenderness to those close", "image": "img2/sphynx_cat_water-removebg-preview.png"},
          {"mbti": "ISTP", "element": "fire", "species": "å­ŸåŠ æ‹‰è²“", "species_en": "Bengal Cat", "description": "ç²¾åŠ›æ—ºç››ï¼Œç†±æ„›æŒ‘æˆ°ï¼Œç¸½åœ¨è¡Œå‹•ä¸­æˆé•·", "description_en": "Energetic, loves challenges, always growing through action", "image": "img2/bengal_cat_challenge-removebg-preview.png"},
          {"mbti": "ISTP", "element": "earth", "species": "æ—¥æœ¬çŸ­å°¾è²“", "species_en": "Japanese Bobtail", "description": "éˆæ´»åˆç©©å®šï¼Œç†±æ„›è‡ªç”±å»ä¸å¤±è¦å¾‹", "description_en": "Flexible yet stable, loves freedom while maintaining routine", "image": "img2/japanese_bobtail_earth-removebg-preview.png"},
          {"mbti": "ISTP", "element": "air", "species": "ç¾åœ‹çŸ­æ¯›è²“", "species_en": "American Shorthair", "description": "åæ‡‰æ•æ·ï¼Œæ“…é•·ç”¨å‰µæ„è§£æ±ºå•é¡Œ", "description_en": "Quick to react, skilled at solving problems creatively", "image": "img2/american_shorthair_creative-removebg-preview.png"},
          {"mbti": "ISTP", "element": "water", "species": "æš¹ç¾…è²“", "species_en": "Siamese Cat", "description": "æ„Ÿæ€§ä¸­å¸¶å†’éšªï¼Œé¡˜æ„é™ªä¼´ä¸¦æ¢ç´¢ä¸–ç•Œ", "description_en": "Adventurous with sensitivity, willing to accompany and explore the world", "image": "img2/siamese_cat_water_adventure-removebg-preview.png"},
          {"mbti": "ISFP", "element": "fire", "species": "ç´…è™æ–‘è²“", "species_en": "Red Tabby Cat", "description": "ç†±æƒ…è—è¡“å®¶ï¼Œç¸½èƒ½è®“ç”Ÿæ´»å……æ»¿è‰²å½©", "description_en": "Passionate artist, always filling life with color", "image": "img2/red_tabby_fire-removebg-preview.png"},
          {"mbti": "ISFP", "element": "earth", "species": "æŒªå¨æ£®æ—è²“", "species_en": "Norwegian Forest Cat", "description": "å…¸é›…åˆç†±æ„›è‡ªç„¶ï¼Œåƒæ£®æ—è©©äººèˆ¬è‡ªç”±", "description_en": "Elegant and nature-loving, free like a forest poet", "image": "img2/norwegian_forest_earth-removebg-preview.png"},
          {"mbti": "ISFP", "element": "air", "species": "ç¾åœ‹çŸ­æ¯›è²“", "species_en": "American Shorthair", "description": "è‡ªç”±éˆé­‚ï¼Œæ“æœ‰è°æ˜çš„å°è…¦è¢‹", "description_en": "Free spirit with a clever little mind", "image": "img2/american_shorthair_free-removebg-preview.png"},
          {"mbti": "ISFP", "element": "water", "species": "å¸ƒå¶è²“", "species_en": "Ragdoll", "description": "æŸ”æƒ…ä¼¼æ°´ï¼Œç¸½èƒ½çµ¦äºˆå®‰å¿ƒèˆ‡æº«æš–", "description_en": "Gentle as water, always providing comfort and warmth", "image": "img2/ragdoll_water-removebg-preview.png"},
          {"mbti": "INFP", "element": "fire", "species": "ç¾åœ‹çŸ­æ¯›è²“", "species_en": "American Shorthair", "description": "æµªæ¼«ç†æƒ³å®¶ï¼Œå»åˆç†±æƒ…ï¼Œåƒç«ç„°èˆ¬æº«æš–", "description_en": "Romantic idealist, yet passionate, warm like a flame", "image": "img2/american_shorthair_fire_idealist-removebg-preview.png"},
          {"mbti": "INFP", "element": "earth", "species": "å¸ƒå¶è²“", "species_en": "Ragdoll", "description": "ç´”çœŸæº«æŸ”ï¼Œçµ¦äººæœ€è¸å¯¦çš„é™ªä¼´", "description_en": "Pure and gentle, providing the most reliable companionship", "image": "img2/ragdoll_earth-removebg-preview.png"},
          {"mbti": "INFP", "element": "air", "species": "åº·æ²ƒçˆ¾é›·å…‹æ–¯è²“", "species_en": "Cornish Rex", "description": "è—è¡“éˆé­‚ï¼Œè…¦è¢‹è£¡å……æ»¿å¥‡å¦™é»å­", "description_en": "Artistic soul, mind full of wonderful ideas", "image": "img2/cornish_rex_air-removebg-preview.png"},
          {"mbti": "INFP", "element": "water", "species": "å–œé¦¬æ‹‰é›…è²“", "species_en": "Himalayan Cat", "description": "æƒ…æ„Ÿè±å¯Œï¼Œæœ€æ‡‚å¿ƒéˆæ·±è™•çš„å¤¢æƒ³å®¶", "description_en": "Emotionally rich, the dreamer who understands the depths of the soul", "image": "img2/himalayan_cat_dreamer-removebg-preview.png"},
          {"mbti": "INTP", "element": "fire", "species": "é˜¿æ¯”è¥¿å°¼äºè²“", "species_en": "Abyssinian Cat", "description": "è°æ˜æ´»æ½‘ï¼Œç¸½æœ‰æ–°å¥‡å‰µæ„ï¼Œå……æ»¿å†’éšªç²¾ç¥", "description_en": "Smart and lively, always with novel creativity, full of adventurous spirit", "image": "img2/abyssinian_cat_intp_fire-removebg-preview.png"},
          {"mbti": "INTP", "element": "earth", "species": "è‹±åœ‹çŸ­æ¯›è²“", "species_en": "British Shorthair", "description": "å†·éœç†æ™ºï¼Œæ˜¯åˆ†æèˆ‡ç©©å®šä¸¦å­˜çš„å®Œç¾å…¸ç¯„", "description_en": "Calm and rational, the perfect example of analysis and stability coexisting", "image": "img2/british_shorthair_earth-removebg-preview.png"},
          {"mbti": "INTP", "element": "air", "species": "æš¹ç¾…è²“", "species_en": "Siamese Cat", "description": "è°æ˜ä¼¶ä¿ï¼Œè§€å¯ŸåŠ›è¶…ç¾¤ï¼Œåƒå°ç§‘å­¸å®¶ä¸€æ¨£å¥½å¥‡å¿ƒçˆ†æ£š", "description_en": "Smart and clever, exceptional observation skills, bursting with curiosity like a little scientist", "image": "img2/siamese_cat_scientist-removebg-preview.png"},
          {"mbti": "INTP", "element": "water", "species": "ä¿„ç¾…æ–¯è—è²“", "species_en": "Russian Blue", "description": "è¡¨é¢å†·é…·ï¼Œå…§å¿ƒæŸ”æƒ…ï¼Œæ„Ÿæ€§èˆ‡ç†æ€§å…¼å…·", "description_en": "Cool on the surface, tender inside, combining emotion and rationality", "image": "img2/russian_blue_water-removebg-preview.png"},
          {"mbti": "ESTJ", "element": "fire", "species": "å¾·åœ‹ç‰§ç¾ŠçŠ¬", "species_en": "German Shepherd", "description": "è°æ˜ä¸”æœå¾ï¼Œå¤©ç”Ÿçš„é ˜å°è€…ï¼Œä¿è­·æ…¾å¼·", "description_en": "Smart and obedient, natural leader with strong protective instincts", "image": "img2/german_shepherd_fire-removebg-preview.png"},
          {"mbti": "ESTJ", "element": "earth", "species": "æ‹‰å¸ƒæ‹‰å¤š", "species_en": "Labrador Retriever", "description": "å¿ èª ç©©é‡ï¼Œæ˜¯æœ€å€¼å¾—ä¿¡ä»»çš„å¤¥ä¼´", "description_en": "Loyal and steady, the most trustworthy companion", "image": "img2/labrador_earth-removebg-preview.png"},
          {"mbti": "ESTJ", "element": "air", "species": "æœè³“çŠ¬", "species_en": "Doberman Pinscher", "description": "åæ‡‰æ•æ·ã€æ²‰è‘—å†·éœï¼Œæ˜¯ç­–ç•¥å‹å®ˆè­·è€…", "description_en": "Quick reflexes, calm and composed, a strategic guardian", "image": "img2/doberman_air-removebg-preview.png"},
          {"mbti": "ESTJ", "element": "water", "species": "ç§‹ç”°çŠ¬", "species_en": "Akita Inu", "description": "å…§æ–‚å¿ å¿ƒï¼Œä¿è­·æ…¾æ¥µå¼·ï¼Œæ˜¯æ²‰ç©©çš„å®ˆè­·è€…", "description_en": "Reserved and loyal, extremely protective, a steady guardian", "image": "img2/akita_inu_water-removebg-preview.png"},
          {"mbti": "ESFJ", "element": "fire", "species": "é»ƒé‡‘çµçŠ¬", "species_en": "Golden Retriever", "description": "ç†±æƒ…å‹å–„ï¼Œå¸¶çµ¦ä½ æ»¿æ»¿é™½å…‰èˆ‡æ­£èƒ½é‡", "description_en": "Warm and friendly, bringing you sunshine and positive energy", "image": "img2/golden_retriever_fire-removebg-preview.png"},
          {"mbti": "ESFJ", "element": "earth", "species": "è–ä¼¯ç´çŠ¬", "species_en": "Saint Bernard", "description": "å·¨å¤§å»æº«æŸ”ï¼Œå¤©ç„¶çš„å®ˆè­·å¤©ä½¿ï¼Œè®“ä½ å®‰å¿ƒ", "description_en": "Large yet gentle, natural guardian angel that gives you peace of mind", "image": "img2/saint_bernard_earth-removebg-preview.png"},
          {"mbti": "ESFJ", "element": "air", "species": "å¯å¡çŠ¬", "species_en": "Cocker Spaniel", "description": "é–‹æœ—æ„›ç©ï¼Œå–œæ­¡äº’å‹•ï¼Œæ˜¯å¿«æ¨‚å°å¹«æ‰‹", "description_en": "Cheerful and playful, loves interaction, a happy little helper", "image": "img2/cocker_spaniel_air-removebg-preview.png"},
          {"mbti": "ESFJ", "element": "water", "species": "å¡ç“¦åˆ©ç‹æŸ¥ç†çµçŠ¬", "species_en": "Cavalier King Charles Spaniel", "description": "æ„Ÿæƒ…è±å¯Œï¼Œæœ€æ„›çª©åœ¨ä½ æ‡·è£¡ï¼Œæ˜¯æº«æŸ”é»äººçš„ä¼´ä¾¶", "description_en": "Emotionally rich, loves to snuggle in your arms, a gentle clingy companion", "image": "img2/cavalier_king_water-removebg-preview.png"},
          {"mbti": "ENFJ", "element": "fire", "species": "é‚Šå¢ƒç‰§ç¾ŠçŠ¬", "species_en": "Border Collie", "description": "è°æ˜ç†±æƒ…ï¼Œæ“…é•·å¸¶é ˜ç¾¤é«”ï¼Œæ´»åŠ›æ»¿æ»¿", "description_en": "Smart and passionate, skilled at leading groups, full of energy", "image": "img2/border_collie_fire-removebg-preview.png"},
          {"mbti": "ENFJ", "element": "earth", "species": "ä¼¯æ©å±±çŠ¬", "species_en": "Bernese Mountain Dog", "description": "æº«æŸ”å¯é ï¼Œå¤©ç„¶çš„å®ˆè­·è€…ï¼Œæœ€æœ‰å®‰å…¨æ„Ÿ", "description_en": "Gentle and reliable, natural guardian, most reassuring", "image": "img2/bernese_mountain_earth-removebg-preview.png"},
          {"mbti": "ENFJ", "element": "air", "species": "è–©æ‘©è€¶", "species_en": "Samoyed", "description": "å¾®ç¬‘å¤©ä½¿ï¼Œæ¨‚è§€æ´»æ½‘ï¼Œå‚³éå¿«æ¨‚èƒ½é‡", "description_en": "Smiling angel, optimistic and lively, spreading happy energy", "image": "img2/samoyed_air-removebg-preview.png"},
          {"mbti": "ENFJ", "element": "water", "species": "æ„›çˆ¾è˜­é›ªé”çŠ¬", "species_en": "Irish Setter", "description": "æƒ…æ„Ÿç´°è†©ï¼Œæµªæ¼«æº«æŸ”ï¼Œç†±æ„›æ·±åº¦é€£çµ", "description_en": "Emotionally delicate, romantic and gentle, loves deep connections", "image": "img2/irish_setter_water-removebg-preview.png"},
          {"mbti": "ENTJ", "element": "fire", "species": "ç¾…å¨ç´çŠ¬", "species_en": "Rottweiler", "description": "å¨åš´å¼·å¤§ï¼Œæ‡‚å¾—ä¿è­·å®¶äººï¼Œè¡Œå‹•åŠ›åè¶³", "description_en": "Majestic and powerful, knows how to protect family, full of action", "image": "img2/rottweiler_fire-removebg-preview.png"},
          {"mbti": "ENTJ", "element": "earth", "species": "æ‹³å¸«çŠ¬", "species_en": "Boxer", "description": "æ²‰ç©©æœæ–·ï¼ŒçµåˆåŠ›é‡èˆ‡æŸ”å’Œï¼Œæ˜¯ç­–ç•¥å‹è¡Œå‹•å®¶", "description_en": "Steady and decisive, combining strength with gentleness, a strategic activist", "image": "img2/boxer_earth-removebg-preview.png"},
          {"mbti": "ENTJ", "element": "air", "species": "å¾·åœ‹è³“æ²™çŠ¬", "species_en": "German Pinscher", "description": "æ©Ÿæ•è°æ…§ï¼Œæ“…é•·æŒæ§å…¨å±€ï¼Œå†·éœåˆéˆæ´»", "description_en": "Alert and intelligent, skilled at controlling the overall situation, calm yet flexible", "image": "img2/german_pinscher_air-removebg-preview.png"},
          {"mbti": "ENTJ", "element": "water", "species": "æœé«˜çŠ¬", "species_en": "Dogo Argentino", "description": "å¤–å‰›å…§æŸ”ï¼Œé‡æƒ…é‡ç¾©ï¼Œæœæ•¢ä¸”æœ‰æº«åº¦çš„å®ˆè­·è€…", "description_en": "Tough outside, gentle inside, values emotion and loyalty, a brave yet warm guardian", "image": "img2/dogo_argentino_water-removebg-preview.png"},
          {"mbti": "ESTP", "element": "fire", "species": "è¥¿ä¼¯åˆ©äºå“ˆå£«å¥‡", "species_en": "Siberian Husky", "description": "å†’éšªå®¶ï¼Œç²¾åŠ›ç„¡çª®ï¼Œç†±æ„›æŒ‘æˆ°èˆ‡æ¢ç´¢", "description_en": "Adventurer with endless energy, loves challenges and exploration", "image": "img2/siberian_husky_fire-removebg-preview.png"},
          {"mbti": "ESTP", "element": "earth", "species": "ç¾åœ‹é¬¥ç‰›çŠ¬", "species_en": "American Bulldog", "description": "å‹‡æ•¢å‹™å¯¦ï¼Œè¡Œå‹•æœæ–·ï¼Œç©©å¥åˆå¯é ", "description_en": "Brave and practical, decisive in action, steady and reliable", "image": "img2/american_bulldog_earth-removebg-preview.png"},
          {"mbti": "ESTP", "element": "air", "species": "å‚‘å…‹ç¾…ç´ æ¢—", "species_en": "Jack Russell Terrier", "description": "æ©Ÿéˆæ„›ç©ï¼Œç¸½èƒ½å¸¶ä¾†é©šå–œï¼Œæ˜¯è¡Œå‹•æ´¾å°èƒ½æ‰‹", "description_en": "Smart and playful, always bringing surprises, an action-oriented little expert", "image": "img2/jack_russell_air-removebg-preview.png"},
          {"mbti": "ESTP", "element": "water", "species": "è‹±åœ‹å²è³“æ ¼çŠ¬", "species_en": "English Springer Spaniel", "description": "æ„›å†’éšªåˆé»äººï¼Œæº«æŸ”æ„Ÿæ€§ï¼Œæ¨‚æ–¼åˆ†äº«æ„›èˆ‡å¿«æ¨‚", "description_en": "Loves adventure yet clingy, gentle and sensitive, happy to share love and joy", "image": "img2/english_springer_water-removebg-preview.png"},
          {"mbti": "ESFP", "element": "fire", "species": "åšç¾çŠ¬", "species_en": "Pomeranian", "description": "æ´»æ½‘å°æ˜æ˜Ÿï¼Œç†±æƒ…é–‹æœ—ï¼Œäº«å—èˆå°ç„¦é»", "description_en": "Lively little star, passionate and cheerful, enjoys being in the spotlight", "image": "img2/pomeranian_fire-removebg-preview.png"},
          {"mbti": "ESFP", "element": "earth", "species": "æ³•åœ‹é¬¥ç‰›çŠ¬", "species_en": "French Bulldog", "description": "æ…µæ‡¶æº«æŸ”ï¼Œæ„›æ’’å¬Œï¼Œæ˜¯ç”Ÿæ´»äº«æ¨‚å°ˆå®¶", "description_en": "Lazy and gentle, loves to act cute, an expert in enjoying life", "image": "img2/french_bulldog_earth-removebg-preview.png"},
          {"mbti": "ESFP", "element": "air", "species": "æ¯”ç†ŠçŠ¬", "species_en": "Bichon Frise", "description": "é–‹æœ—æ©Ÿéˆï¼Œç¸½èƒ½å¸¶ä¾†å¥½å¿ƒæƒ…ï¼Œæ˜¯å°å¤ªé™½", "description_en": "Cheerful and clever, always bringing good mood, like a little sun", "image": "img2/bichon_frise_air-removebg-preview.png"},
          {"mbti": "ESFP", "element": "water", "species": "è¥¿æ–½çŠ¬", "species_en": "Shih Tzu", "description": "æº«æŸ”è¦ªè¿‘ï¼Œé»äººå°ç”œå¿ƒï¼Œæ„›çª©åœ¨ä½ èº«é‚Š", "description_en": "Gentle and affectionate, clingy little sweetheart, loves to stay by your side", "image": "img2/shih_tzu_water-removebg-preview.png"},
          {"mbti": "ENFP", "element": "fire", "species": "æ–‘é»ç‹—", "species_en": "Dalmatian", "description": "æ´»åŠ›æ»¿æ»¿ï¼Œæ„›ç©æ„›å†’éšªï¼Œå¤©ç”Ÿçš„æ¨‚å¤©æ´¾", "description_en": "Full of energy, loves to play and adventure, naturally optimistic", "image": "img2/dalmatian_fire-removebg-preview.png"},
          {"mbti": "ENFP", "element": "earth", "species": "æŸ´çŠ¬", "species_en": "Shiba Inu", "description": "å¤–å†·å…§ç†±ï¼Œå€‹æ€§é®®æ˜ï¼Œæ„›èˆ‡äººäº’å‹•", "description_en": "Cool outside but warm inside, distinctive personality, loves interacting with people", "image": "img2/shiba_inu_earth-removebg-preview.png"},
          {"mbti": "ENFP", "element": "air", "species": "æƒ æ¯”ç‰¹çŠ¬", "species_en": "Whippet", "description": "åæ‡‰å¿«ã€å–œæ„›äº’å‹•ï¼Œæ˜¯ç”Ÿæ´»çš„å°é©šå–œ", "description_en": "Quick reactions, loves interaction, life's little surprise", "image": "img2/whippet_air-removebg-preview.png"},
          {"mbti": "ENFP", "element": "water", "species": "æ¯”æ ¼çŠ¬", "species_en": "Beagle", "description": "æƒ…æ„Ÿè±å¯Œï¼Œæ„›æ’’å¬Œï¼Œæœ€å–œæ­¡å’Œæœ‹å‹åœ¨ä¸€èµ·", "description_en": "Emotionally rich, loves to act cute, enjoys being with friends most", "image": "img2/beagle_water-removebg-preview.png"},
          {"mbti": "ENTP", "element": "fire", "species": "æŸ¯åŸº", "species_en": "Corgi", "description": "å¤–è¡¨å‘†èŒï¼Œå»è°æ˜ä¼¶ä¿ï¼Œæ“…é•·æ´»çµ¡æ°£æ°›", "description_en": "Cute appearance but smart and clever, skilled at livening up the atmosphere", "image": "img2/corgi_fire-removebg-preview.png"},
          {"mbti": "ENTP", "element": "earth", "species": "ç‰›é ­æ¢—", "species_en": "Bull Terrier", "description": "å‹‡æ•¢æœ‰å€‹æ€§ï¼Œæ©Ÿæ™ºæœæ–·ï¼Œæ˜¯å¿ èª å®ˆè­·è€…", "description_en": "Brave and characterful, witty and decisive, a loyal guardian", "image": "img2/bull_terrier_earth-removebg-preview.png"},
          {"mbti": "ENTP", "element": "air", "species": "è²´è³“çŠ¬", "species_en": "Poodle", "description": "æ™ºå•†ç¬¬ä¸€ï¼Œå­¸ç¿’åŠ›é©šäººï¼Œé‚„è¶…ç´šæ„›ç©ï¼", "description_en": "Top intelligence, amazing learning ability, and super playful!", "image": "img2/poodle_air-removebg-preview.png"},
          {"mbti": "ENTP", "element": "water", "species": "è´è¶çŠ¬", "species_en": "Papillon", "description": "è°æ˜éˆå·§ï¼Œæ„›æ’’å¬Œï¼Œæ˜¯è¿·äººçš„å°æ©Ÿéˆ", "description_en": "Smart and agile, loves to act cute, a charming little clever one", "image": "img2/papillon_water-removebg-preview.png"}
        ];
        
        console.log('å‹•ç‰©æ•¸æ“šè¼‰å…¥æˆåŠŸ:', animalData.length, 'ç­†è³‡æ–™');
        
        // Load user pet data from localStorage
        loadUserPet();
        
        // Render gallery
        renderGallery();
      } catch (error) {
        console.error('è¼‰å…¥å‹•ç‰©æ•¸æ“šå¤±æ•—:', error);
      }
    }

    // Load user pet from localStorage
    function loadUserPet() {
      const stored = localStorage.getItem('mbtiPetResult');
      if (stored) {
        userPetData = JSON.parse(stored);
        console.log('è¼‰å…¥ä½¿ç”¨è€…å¯µç‰©:', userPetData);
        
        // é¡¯ç¤ºä¸¦è¨­ç½®ç”¨æˆ¶å…ƒç´ æŒ‰éˆ•
        setupUserElementButton();
      }
    }

    // è¨­ç½®ç”¨æˆ¶å…ƒç´ æŒ‰éˆ•
    function setupUserElementButton() {
      if (!userPetData || !userPetData.element) return;
      
      const userElementTab = document.getElementById('userElementTab');
      const userElementTextZh = document.getElementById('userElementTextZh');
      const userElementTextEn = document.getElementById('userElementTextEn');
      
      if (userElementTab && userElementTextZh && userElementTextEn) {
        // é¡¯ç¤ºæŒ‰éˆ•
        userElementTab.style.display = 'block';
        
        // è¨­ç½®æŒ‰éˆ•æ–‡å­—
        const element = userPetData.element;
        const elementEmoji = {
          fire: 'ğŸ”¥',
          earth: 'ğŸŒ¿', 
          air: 'ğŸ’¨',
          water: 'ğŸ’§'
        };
        
        const elementNameZh = {
          fire: 'ç«å…ƒç´ ',
          earth: 'åœŸå…ƒç´ ',
          air: 'é¢¨å…ƒç´ ', 
          water: 'æ°´å…ƒç´ '
        };
        
        const elementNameEn = {
          fire: 'Fire Element',
          earth: 'Earth Element',
          air: 'Air Element',
          water: 'Water Element'
        };
        
        userElementTextZh.textContent = `${elementEmoji[element] || 'â­'} ${elementNameZh[element] || 'ä½ çš„å…ƒç´ '}`;
        userElementTextEn.textContent = `${elementEmoji[element] || 'â­'} ${elementNameEn[element] || 'Your Element'}`;
      }
    }

    // Get pet type (cat or dog)
    function getPetType(species) {
      const cats = ['è²“', 'Cat', 'cat'];
      const dogs = ['çŠ¬', 'ç‹—', 'Dog', 'dog', 'Retriever', 'Shepherd', 'Terrier', 'Spaniel', 'Bulldog', 'Pinscher'];
      
      if (cats.some(cat => species.includes(cat))) return 'cat';
      if (dogs.some(dog => species.includes(dog))) return 'dog';
      
      // Additional logic for specific breeds
      const dogBreeds = ['å¾·åœ‹ç‰§ç¾ŠçŠ¬', 'æ‹‰å¸ƒæ‹‰å¤š', 'æœè³“çŠ¬', 'ç§‹ç”°çŠ¬', 'é»ƒé‡‘çµçŠ¬', 'è–ä¼¯ç´çŠ¬', 'å¯å¡çŠ¬', 'å¡ç“¦åˆ©ç‹æŸ¥ç†çµçŠ¬', 
                         'é‚Šå¢ƒç‰§ç¾ŠçŠ¬', 'ä¼¯æ©å±±çŠ¬', 'è–©æ‘©è€¶', 'æ„›çˆ¾è˜­é›ªé”çŠ¬', 'ç¾…å¨ç´çŠ¬', 'æ‹³å¸«çŠ¬', 'å¾·åœ‹è³“æ²™çŠ¬', 'æœé«˜çŠ¬',
                         'è¥¿ä¼¯åˆ©äºå“ˆå£«å¥‡', 'ç¾åœ‹é¬¥ç‰›çŠ¬', 'å‚‘å…‹ç¾…ç´ æ¢—', 'è‹±åœ‹å²è³“æ ¼çŠ¬', 'åšç¾çŠ¬', 'æ³•åœ‹é¬¥ç‰›çŠ¬', 'æ¯”ç†ŠçŠ¬',
                         'è¥¿æ–½çŠ¬', 'æ–‘é»ç‹—', 'æŸ´çŠ¬', 'æƒ æ¯”ç‰¹çŠ¬', 'æ¯”æ ¼çŠ¬', 'æŸ¯åŸº', 'ç‰›é ­æ¢—', 'è²´è³“çŠ¬', 'è´è¶çŠ¬',
                         'German Shepherd', 'Labrador Retriever', 'Doberman Pinscher', 'Akita Inu', 'Golden Retriever',
                         'Saint Bernard', 'Cocker Spaniel', 'Cavalier King Charles Spaniel', 'Border Collie', 'Bernese Mountain Dog',
                         'Samoyed', 'Irish Setter', 'Rottweiler', 'Boxer', 'German Pinscher', 'Dogo Argentino',
                         'Siberian Husky', 'American Bulldog', 'Jack Russell Terrier', 'English Springer Spaniel',
                         'Pomeranian', 'French Bulldog', 'Bichon Frise', 'Shih Tzu', 'Dalmatian', 'Shiba Inu',
                         'Whippet', 'Beagle', 'Corgi', 'Bull Terrier', 'Poodle', 'Papillon'];
      
      return dogBreeds.includes(species) ? 'dog' : 'cat';
    }

    // Create pet card HTML
    function createPetCard(pet, isUserPet = false) {
      const petType = getPetType(pet.species);
      const currentLang = document.documentElement.getAttribute('data-lang') || 'zh-TW';
      const species = currentLang === 'en-US' ? pet.species_en : pet.species;
      const description = currentLang === 'en-US' ? pet.description_en : pet.description;
      const typeText = currentLang === 'en-US' ? (petType === 'cat' ? 'Cat' : 'Dog') : (petType === 'cat' ? 'è²“å’ª' : 'ç‹—ç‹—');
      
      return `
        <div class="pet-card ${isUserPet ? 'user-pet' : ''}" style="animation-delay: ${Math.random() * 0.3}s">
          <div class="pet-type-badge">${typeText}</div>
          <img src="${pet.image}" alt="${species}" class="pet-image" onerror="this.src='img/placeholder.png'">
          <div class="pet-info">
            <h3 class="pet-species">${species}</h3>
            <div>
              <span class="pet-mbti">${pet.mbti}</span>
              <span class="pet-element ${pet.element}">
                ${pet.element === 'fire' ? 'ğŸ”¥' : pet.element === 'earth' ? 'ğŸŒ¿' : pet.element === 'air' ? 'ğŸ’¨' : 'ğŸ’§'} 
                ${currentLang === 'en-US' ? 
                  (pet.element === 'fire' ? 'Fire' : pet.element === 'earth' ? 'Earth' : pet.element === 'air' ? 'Air' : 'Water') :
                  (pet.element === 'fire' ? 'ç«' : pet.element === 'earth' ? 'åœŸ' : pet.element === 'air' ? 'é¢¨' : 'æ°´')
                }
              </span>
            </div>
            <p class="pet-description">${description}</p>
          </div>
        </div>
      `;
    }

    // Filter pets
    function filterPets(filter) {
      currentFilter = filter;
      
      // Update active tab
      document.querySelectorAll('.filter-tab').forEach(tab => {
        tab.classList.remove('active');
      });
      event.target.classList.add('active');
      
      renderGallery();
    }

    // Render gallery
    function renderGallery() {
      const galleryGrid = document.getElementById('galleryGrid');
      
      if (!animalData.length) {
        galleryGrid.innerHTML = '<div class="loading"><span data-zh>è¼‰å…¥ä¸­...</span><span data-en>Loading...</span></div>';
        return;
      }
      
      let filteredData = animalData;
      
      // Apply filters
      if (currentFilter !== 'all') {
        if (currentFilter === 'cat' || currentFilter === 'dog') {
          // ç‰©ç¨®ç¯©é¸
          filteredData = animalData.filter(pet => getPetType(pet.species) === currentFilter);
        } else if (currentFilter === 'NT' || currentFilter === 'NF' || currentFilter === 'SJ' || currentFilter === 'SP') {
          // MBTI ç¶­åº¦ç¯©é¸
          filteredData = animalData.filter(pet => {
            const mbti = pet.mbti;
            switch (currentFilter) {
              case 'NT': return mbti.includes('N') && mbti.includes('T');
              case 'NF': return mbti.includes('N') && mbti.includes('F');
              case 'SJ': return mbti.includes('S') && mbti.includes('J');
              case 'SP': return mbti.includes('S') && mbti.includes('P');
              default: return false;
            }
          });
        } else if (currentFilter === 'userElement' && userPetData) {
          // ç”¨æˆ¶å…ƒç´ ç¯©é¸
          filteredData = animalData.filter(pet => pet.element === userPetData.element);
        } else {
          // å…¼å®¹èˆŠçš„å…ƒç´ ç¯©é¸ï¼ˆå¦‚æœé‚„æœ‰çš„è©±ï¼‰
          filteredData = animalData.filter(pet => pet.element === currentFilter);
        }
      }
      
      // Sort to put user pet first if it matches the filter
      if (userPetData) {
        const userPetInFilter = filteredData.find(pet => 
          pet.mbti === userPetData.mbti && pet.element === userPetData.element
        );
        if (userPetInFilter) {
          filteredData = filteredData.filter(pet => 
            !(pet.mbti === userPetData.mbti && pet.element === userPetData.element)
          );
          filteredData.unshift(userPetInFilter);
        }
      }
      
      // Generate HTML
      const cardsHTML = filteredData.map((pet, index) => {
        const isUserPet = userPetData && 
          pet.mbti === userPetData.mbti && 
          pet.element === userPetData.element;
        
        return createPetCard(pet, isUserPet);
      }).join('');
      
      galleryGrid.innerHTML = cardsHTML;
      
      // Trigger animations
      setTimeout(() => {
        document.querySelectorAll('.pet-card').forEach((card, index) => {
          setTimeout(() => {
            card.style.opacity = '1';
            card.style.transform = 'translateY(0)';
          }, index * 50);
        });
      }, 100);
    }

    // Show user pet
    function showUserPet() {
      const userPetSection = document.getElementById('userPetSection');
      const userPetDisplay = document.getElementById('userPetDisplay');
      
      if (!userPetData) {
        userPetDisplay.innerHTML = `
          <p style="margin: 10px 0;">
            <span data-zh>ä½ é‚„æ²’æœ‰åšéæ¸¬é©—å–”ï¼</span>
            <span data-en">You haven't taken the quiz yet!</span>
          </p>
          <a href="index.html" style="display: inline-block; padding: 10px 20px; background: var(--gradient-primary); color: white; text-decoration: none; border-radius: 20px; margin-top: 10px;">
            <span data-zh">ç«‹å³æ¸¬é©—</span>
            <span data-en">Take Quiz Now</span>
          </a>
        `;
      } else {
        // Find the user's pet in the data
        const userPet = animalData.find(pet => 
          pet.mbti === userPetData.mbti && pet.element === userPetData.element
        );
        
        if (userPet) {
          userPetDisplay.innerHTML = `
            <div style="max-width: 300px; margin: 20px auto;">
              ${createPetCard(userPet, true)}
            </div>
          `;
        }
      }
      
      userPetSection.classList.toggle('show');
    }

    // Language switching
    function switchLanguage(lang) {
      document.documentElement.setAttribute('data-lang', lang);
      
      // Update active language button
      document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      document.querySelector(`[data-lang-code="${lang}"]`).classList.add('active');
      
      // Update user element button text when language changes
      setupUserElementButton();
      
      // Re-render gallery to update language
      renderGallery();
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', function() {
      loadAnimalData();
    });

    // Save user result when they complete the quiz
    window.addEventListener('storage', function(e) {
      if (e.key === 'mbtiPetResult') {
        loadUserPet();
        renderGallery();
      }
    });
  </script>
</body>
</html>
