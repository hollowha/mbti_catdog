<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ±ğŸ¶ ç™¼ç¾æœ€åƒä½ çš„æ€§æ ¼å‹•ç‰©</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans+TC:wght@300;400;500;600;700&family=Kalam:wght@300;400;700&family=Caveat:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      /* å¥¶èŒ¶è‰²ç³»é…è‰² */
      --gradient-primary: linear-gradient(135deg, #D2B48C 0%, #BC9A6A 100%);
      --gradient-secondary: linear-gradient(135deg, #F4A7B9 0%, #E8A598 100%);
      --gradient-accent: linear-gradient(135deg, #D4C4A8 0%, #D4C4A8 100%);
      --gradient-warm: linear-gradient(135deg, #F5E6D3 0%, #E8D5B7 100%);
      --bg-color: #FDF6E3;
      --card-bg: rgba(252, 248, 227, 0.9);
      --text-primary: #8B4513;
      --text-secondary: #A0522D;
      --text-accent: #D2691E;
      --border-color: rgba(210, 180, 140, 0.3);
      --shadow-soft: 0 8px 32px rgba(139, 69, 19, 0.1);
      --shadow-hover: 0 15px 35px rgba(139, 69, 19, 0.15);
      --milktea-light: #F7F3E9;
      --milktea-medium: #E6D7C3;
      --milktea-dark: #D2B48C;
      --pink-accent: #F4A7B9;
      --khaki-accent: #C3B091;
      --border-radius: 20px;
      --animation-speed: 0.3s;
    }

    * { 
      box-sizing: border-box; 
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Inter', 'Noto Sans TC', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      background-attachment: fixed;
      color: var(--text-primary);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      line-height: 1.6;
      position: relative;
    }

    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: 
        radial-gradient(circle at 20% 50%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 40% 80%, rgba(255, 255, 255, 0.1) 0%, transparent 50%);
      pointer-events: none;
      z-index: -1;
    }

    .container {
      width: 100%;
      max-width: 680px;
      background: var(--card-bg);
      backdrop-filter: blur(20px);
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius);
      box-shadow: var(--shadow-soft);
      padding: 40px 30px;
      position: relative;
      overflow: hidden;
      animation: slideUp 0.8s ease-out;
    }

    .container::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: var(--gradient-primary);
    }

    .container::after {
      content: 'âœ¨';
      position: absolute;
      top: 15px;
      right: 20px;
      font-size: 1.2rem;
      opacity: 0.7;
      animation: sparkle 2s ease-in-out infinite;
    }

    @keyframes sparkle {
      0%, 100% { opacity: 0.7; transform: scale(1); }
      50% { opacity: 1; transform: scale(1.1); }
    }

    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .header {
      text-align: center;
      margin-bottom: 40px;
    }

    .header h1 {
      font-family: 'Caveat', 'Noto Sans TC', cursive;
      font-size: clamp(2rem, 4vw, 3rem);
      font-weight: 700;
      background: var(--gradient-primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 12px;
      letter-spacing: -0.02em;
      position: relative;
    }

    .header h1::after {
      content: 'ï½';
      position: absolute;
      right: -10px;
      top: -5px;
      color: var(--pink-accent);
      font-size: 0.8em;
      opacity: 0.8;
    }

    .header .subtitle {
      font-family: 'Kalam', 'Noto Sans TC', cursive;
      font-size: 1.1rem;
      color: var(--text-secondary);
      font-weight: 400;
      opacity: 0;
      animation: fadeIn 1s ease-out 0.3s forwards;
      position: relative;
    }

    .header .subtitle::before {
      content: 'â™¡';
      margin-right: 8px;
      color: var(--pink-accent);
    }

    .header .subtitle::after {
      content: 'â™¡';
      margin-left: 8px;
      color: var(--pink-accent);
    }

    @keyframes fadeIn {
      to {
        opacity: 1;
      }
    }

    .progress-bar {
      width: 100%;
      height: 8px;
      background: var(--milktea-light);
      border-radius: 4px;
      margin-bottom: 30px;
      overflow: hidden;
      box-shadow: inset 0 2px 4px rgba(139, 69, 19, 0.1);
    }

    .progress-fill {
      height: 100%;
      background: var(--gradient-primary);
      width: 0%;
      transition: width 0.5s ease-out;
      border-radius: 4px;
      position: relative;
    }

    .progress-fill::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      animation: shimmer 1.5s infinite;
    }

    @keyframes shimmer {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }

    .question {
      background: var(--milktea-light);
      backdrop-filter: blur(10px);
      border: 2px solid var(--border-color);
      border-radius: 16px;
      padding: 24px;
      margin-bottom: 24px;
      box-shadow: var(--shadow-soft);
      transition: all var(--animation-speed) ease;
      opacity: 0;
      transform: translateY(20px);
      animation: questionSlideIn 0.6s ease-out forwards;
      position: relative;
      overflow: hidden;
    }

    .question::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 2px;
      background: var(--gradient-secondary);
      opacity: 0.6;
    }

    .question:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-hover);
      border-color: var(--pink-accent);
    }

    @keyframes questionSlideIn {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .question-number {
      display: inline-block;
      width: 28px;
      height: 28px;
      background: var(--gradient-primary);
      color: white;
      border-radius: 50%;
      text-align: center;
      line-height: 28px;
      font-size: 0.9rem;
      font-weight: 600;
      margin-right: 12px;
    }

    .question p {
      font-family: 'Kalam', 'Noto Sans TC', cursive;
      font-size: 1.2rem;
      font-weight: 500;
      margin-bottom: 16px;
      color: var(--text-primary);
    }

    .options-grid {
      display: grid;
      gap: 12px;
    }

    .option {
      position: relative;
      background: var(--card-bg);
      border: 2px solid var(--milktea-medium);
      border-radius: 12px;
      padding: 16px 20px;
      cursor: pointer;
      transition: all var(--animation-speed) ease;
      backdrop-filter: blur(5px);
    }

    .option:hover {
      background: var(--milktea-light);
      border-color: var(--pink-accent);
      transform: translateX(4px);
      box-shadow: 0 4px 12px rgba(244, 167, 185, 0.3);
    }

    .option input[type="radio"] {
      position: absolute;
      opacity: 0;
      width: 0;
      height: 0;
    }

    .option input[type="radio"]:checked + .option-content {
      background: var(--gradient-secondary);
      color: white;
      border-radius: 8px;
    }

    .option input[type="radio"]:checked + .option-content::before {
      transform: scale(1);
      opacity: 1;
      color: white;
    }

    .option-content {
      position: relative;
      display: flex;
      align-items: center;
      font-family: 'Inter', 'Noto Sans TC', sans-serif;
      font-weight: 500;
      padding-left: 35px;
      transition: all var(--animation-speed) ease;
      border-radius: 8px;
      padding: 12px 16px 12px 45px;
    }

    .option-content::before {
      content: 'â™¡';
      position: absolute;
      left: 16px;
      top: 50%;
      transform: translateY(-50%) scale(0);
      opacity: 0;
      transition: all var(--animation-speed) ease;
      font-weight: bold;
      color: var(--pink-accent);
    }

    .submit-button {
      width: 100%;
      padding: 16px 0;
      background: var(--gradient-primary);
      border: none;
      border-radius: 16px;
      font-family: 'Kalam', 'Noto Sans TC', cursive;
      font-size: 1.2rem;
      font-weight: 600;
      color: white;
      cursor: pointer;
      box-shadow: var(--shadow-soft);
      transition: all var(--animation-speed) ease;
      margin-top: 20px;
      position: relative;
      overflow: hidden;
    }

    .submit-button::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      transition: left 0.5s;
    }

    .submit-button:hover {
      transform: translateY(-2px) scale(1.02);
      box-shadow: var(--shadow-hover);
    }

    .submit-button:hover::before {
      left: 100%;
    }

    .submit-button:disabled {
      background: var(--khaki-accent);
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
      opacity: 0.7;
    }

    .result {
      margin-top: 30px;
      padding: 0;
      background: transparent;
      border: none;
      border-radius: 0;
      box-shadow: none;
      opacity: 0;
      animation: resultFadeIn 0.8s ease-out forwards;
    }

    /* IG Stories é¢¨æ ¼çµæœå¡ç‰‡ */
    .ig-result-card {
      background: linear-gradient(145deg, #ffffff 0%, #fefcf7 100%);
      border-radius: 24px;
      padding: 16px;
      box-shadow: 
        0 20px 60px rgba(0, 0, 0, 0.1),
        0 8px 30px rgba(244, 167, 185, 0.15),
        inset 0 1px 0 rgba(255, 255, 255, 0.8);
      position: relative;
      overflow: hidden;
      border: 2px solid rgba(244, 167, 185, 0.2);
      max-width: 350px;
      max-height: 600px;
      margin: 0 auto;
      aspect-ratio: 9/16;
      display: flex;
      flex-direction: column;
    }

    .ig-result-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 6px;
      background: linear-gradient(90deg, #FF6B6B, #4ECDC4, #45B7D1, #96CEB4, #FFEAA7, #DDA0DD);
      background-size: 300% 300%;
      animation: gradientShift 3s ease infinite;
    }

    /* Stories é¢¨æ ¼é ­éƒ¨ */
    .stories-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 20px;
      padding: 10px 0;
    }

    .stories-profile {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .stories-avatar {
      width: 40px;
      height: 40px;
      background: linear-gradient(45deg, #f09433 0%,#e6683c 25%,#dc2743 50%,#cc2366 75%,#bc1888 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      color: white;
      font-weight: bold;
    }

    .stories-info h4 {
      font-family: 'Inter', 'Noto Sans TC', sans-serif;
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--text-primary);
      margin: 0;
    }

    .stories-info p {
      font-family: 'Inter', 'Noto Sans TC', sans-serif;
      font-size: 0.75rem;
      color: #8e8e93;
      margin: 0;
    }

    .stories-time {
      font-family: 'Inter', 'Noto Sans TC', sans-serif;
      font-size: 0.75rem;
      color: #8e8e93;
    }

    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .result-header {
      text-align: center;
      margin-bottom: 12px;
      position: relative;
      flex-shrink: 0;
    }

    .result-emoji-container {
      position: relative;
      display: inline-block;
      margin-bottom: 8px;
    }

    .result-emoji {
      font-size: 2.8rem;
      position: relative;
      z-index: 2;
      animation: float 3s ease-in-out infinite;
    }

    .emoji-glow {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 80px;
      height: 80px;
      background: radial-gradient(circle, rgba(244, 167, 185, 0.3) 0%, transparent 70%);
      border-radius: 50%;
      animation: pulse-glow 2s ease-in-out infinite;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }

    @keyframes pulse-glow {
      0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.6; }
      50% { transform: translate(-50%, -50%) scale(1.2); opacity: 0.8; }
    }

    .result-title {
      font-family: 'Caveat', 'Noto Sans TC', cursive;
      font-size: 1.6rem;
      font-weight: 700;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 8px;
      line-height: 1.2;
    }

    .result-pet-name {
      font-family: 'Caveat', 'Noto Sans TC', cursive;
      font-size: 1.4rem;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 12px;
      text-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .result-description {
      font-family: 'Kalam', 'Noto Sans TC', cursive;
      font-size: 0.9rem;
      line-height: 1.5;
      color: var(--text-secondary);
      text-align: center;
      margin-bottom: 12px;
      padding: 0 8px;
      flex-shrink: 0;
    }

    .result-mbti-badge {
      display: inline-block;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 12px 24px;
      border-radius: 50px;
      font-family: 'Inter', 'Noto Sans TC', sans-serif;
      font-size: 1rem;
      font-weight: 600;
      margin-bottom: 30px;
      box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
      position: relative;
      overflow: hidden;
      border: 2px solid rgba(255, 255, 255, 0.3);
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
    }

    .result-mbti-badge::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      animation: shine 2s infinite;
    }

    @keyframes shine {
      0% { left: -100%; }
      100% { left: 100%; }
    }

    /* ç›¸ä¼¼å‹•ç‰©å±•ç¤ºå€ */
    .similar-animals {
      background: linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%);
      border-radius: 10px;
      padding: 8px;
      margin: 6px 0;
      border: 1px solid rgba(102, 126, 234, 0.1);
      flex-shrink: 0;
    }

    .similar-title {
      font-family: 'Kalam', 'Noto Sans TC', cursive;
      font-size: 0.75rem;
      font-weight: 600;
      color: var(--text-primary);
      text-align: center;
      margin-bottom: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 4px;
    }

    .animal-row {
      display: flex;
      justify-content: space-around;
      align-items: center;
      margin: 4px 0;
      gap: 4px;
    }

    .mini-animal {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 2px;
      flex: 1;
      text-align: center;
      min-width: 0;
    }

    .mini-animal-emoji {
      font-size: 1.2rem;
      animation: bounce-subtle 2s ease-in-out infinite;
    }

    .mini-animal-name {
      font-family: 'Inter', 'Noto Sans TC', sans-serif;
      font-size: 0.55rem;
      font-weight: 500;
      color: var(--text-secondary);
      line-height: 1.1;
      max-width: 60px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .mini-animal-type {
      font-size: 0.5rem;
      color: #8e8e93;
      font-weight: 400;
      line-height: 1;
    }

    @keyframes bounce-subtle {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-3px); }
    }

    /* äº’å‹•é€£çµå€ */
    .social-connection {
      background: linear-gradient(135deg, rgba(244, 167, 185, 0.1) 0%, rgba(210, 180, 140, 0.1) 100%);
      border-radius: 10px;
      padding: 6px;
      margin: 6px 0;
      text-align: center;
      border: 1px solid rgba(244, 167, 185, 0.2);
      flex-shrink: 0;
    }

    .connection-text {
      font-family: 'Kalam', 'Noto Sans TC', cursive;
      font-size: 0.65rem;
      color: var(--text-secondary);
      margin-bottom: 4px;
      line-height: 1.2;
    }

    .connection-tags {
      display: flex;
      justify-content: center;
      gap: 3px;
      flex-wrap: wrap;
    }

    .connection-tag {
      background: rgba(102, 126, 234, 0.1);
      color: var(--text-primary);
      padding: 2px 6px;
      border-radius: 8px;
      font-size: 0.55rem;
      font-weight: 500;
      font-family: 'Inter', 'Noto Sans TC', sans-serif;
    }

    /* Stories é¢¨æ ¼é ­éƒ¨ */
    .stories-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 12px;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-radius: 16px 16px 0 0;
      margin: -16px -16px 10px -16px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      flex-shrink: 0;
    }

    .stories-profile {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .stories-avatar {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.9rem;
      border: 2px solid rgba(255, 255, 255, 0.3);
    }

    .stories-info {
      display: flex;
      flex-direction: column;
      gap: 1px;
    }

    .stories-username {
      font-family: 'Inter', 'Noto Sans TC', sans-serif;
      font-size: 0.75rem;
      font-weight: 600;
      color: white;
      line-height: 1;
    }

    .stories-time {
      font-family: 'Inter', 'Noto Sans TC', sans-serif;
      font-size: 0.65rem;
      color: rgba(255, 255, 255, 0.7);
      line-height: 1;
    }

    .stories-options {
      color: rgba(255, 255, 255, 0.8);
      font-size: 1rem;
      cursor: pointer;
      padding: 3px;
      border-radius: 50%;
      transition: background-color 0.2s ease;
    }

    .stories-options:hover {
      background-color: rgba(255, 255, 255, 0.1);
    }

    /* æ»¾å‹•å€åŸŸæ¨£å¼ */
    .scrollable-content {
      scrollbar-width: thin;
      scrollbar-color: rgba(244, 167, 185, 0.3) transparent;
    }

    .scrollable-content::-webkit-scrollbar {
      width: 3px;
    }

    .scrollable-content::-webkit-scrollbar-track {
      background: transparent;
    }

    .scrollable-content::-webkit-scrollbar-thumb {
      background: rgba(244, 167, 185, 0.3);
      border-radius: 2px;
    }

    .scrollable-content::-webkit-scrollbar-thumb:hover {
      background: rgba(244, 167, 185, 0.5);
    }

    .share-section {
      background: linear-gradient(135deg, rgba(244, 167, 185, 0.1) 0%, rgba(210, 180, 140, 0.1) 100%);
      border-radius: 12px;
      padding: 10px;
      margin-top: 8px;
      border: 1px solid rgba(244, 167, 185, 0.2);
      flex-shrink: 0;
    }

    .share-title {
      font-family: 'Kalam', 'Noto Sans TC', cursive;
      font-size: 0.8rem;
      color: var(--text-primary);
      text-align: center;
      margin-bottom: 8px;
      font-weight: 500;
    }

    .share-buttons {
      display: flex;
      justify-content: center;
      gap: 6px;
      flex-wrap: wrap;
      margin-bottom: 0;
    }

    .share-btn {
      display: flex;
      align-items: center;
      gap: 4px;
      padding: 6px 10px;
      border: none;
      border-radius: 15px;
      font-family: 'Inter', 'Noto Sans TC', sans-serif;
      font-size: 0.65rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .share-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0,0,0,0.15);
    }

    .share-btn.instagram {
      background: linear-gradient(45deg, #f09433 0%,#e6683c 25%,#dc2743 50%,#cc2366 75%,#bc1888 100%);
      color: white;
    }

    .share-btn.facebook {
      background: #1877f2;
      color: white;
    }

    .share-btn.twitter {
      background: #1da1f2;
      color: white;
    }

    .share-btn.line {
      background: #00c300;
      color: white;
    }

    .share-btn.copy {
      background: linear-gradient(135deg, var(--gradient-secondary));
      color: white;
    }

    .explore-btn {
      width: 100%;
      padding: 15px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border: none;
      border-radius: 15px;
      color: white;
      font-family: 'Kalam', 'Noto Sans TC', cursive;
      font-size: 1.1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
      position: relative;
      overflow: hidden;
    }

    .explore-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: left 0.5s;
    }

    .explore-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 35px rgba(102, 126, 234, 0.4);
    }

    .explore-btn:hover::before {
      left: 100%;
    }

    /* è£é£¾å…ƒç´  */
    .decorative-hearts {
      position: absolute;
      top: 20px;
      right: 20px;
      font-size: 1.2rem;
      opacity: 0.6;
      animation: twinkle 2s ease-in-out infinite;
    }

    .decorative-sparkles {
      position: absolute;
      bottom: 20px;
      left: 20px;
      font-size: 1rem;
      opacity: 0.5;
      animation: twinkle 2s ease-in-out infinite 1s;
    }

    /* éŸ¿æ‡‰å¼è¨­è¨ˆ */
    @media (max-width: 768px) {
      .ig-result-card {
        padding: 30px 20px;
        margin: 0 10px;
      }
      
      .result-emoji {
        font-size: 3.5rem;
      }
      
      .result-title {
        font-size: 1.8rem;
      }
      
      .result-pet-name {
        font-size: 1.6rem;
      }
      
      .share-buttons {
        gap: 8px;
      }
      
      .share-btn {
        padding: 8px 12px;
        font-size: 0.8rem;
      }
    }

    @keyframes resultFadeIn {
      to {
        opacity: 1;
      }
    }

    .result h2 {
      font-family: 'Caveat', 'Noto Sans TC', cursive;
      font-size: 2rem;
      font-weight: 700;
      background: var(--gradient-secondary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 16px;
      text-align: center;
      position: relative;
    }

    .result h2::before {
      content: 'âœ§';
      position: absolute;
      left: -40px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--pink-accent);
      font-size: 1.5rem;
      animation: twinkle 2s ease-in-out infinite;
    }

    .result h2::after {
      content: 'âœ§';
      position: absolute;
      right: -40px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--pink-accent);
      font-size: 1.5rem;
      animation: twinkle 2s ease-in-out infinite 0.5s;
    }

    @keyframes twinkle {
      0%, 100% { opacity: 0.6; transform: translateY(-50%) scale(0.8); }
      50% { opacity: 1; transform: translateY(-50%) scale(1.2); }
    }

    .result-pet {
      text-align: center;
      font-size: 3rem;
      margin: 20px 0;
    }

    .result-desc {
      font-family: 'Kalam', 'Noto Sans TC', cursive;
      font-size: 1.1rem;
      line-height: 1.8;
      color: var(--text-secondary);
      text-align: center;
    }

    /* éŸ¿æ‡‰å¼è¨­è¨ˆ */
    @media (max-width: 768px) {
      .container {
        padding: 30px 20px;
        margin: 10px;
      }
      
      .question {
        padding: 20px;
      }
      
      .option-content {
        padding: 10px 12px 10px 40px;
        font-size: 0.95rem;
      }

      .result h2::before,
      .result h2::after {
        display: none;
      }

      .header h1::after {
        right: -5px;
        font-size: 0.6em;
      }
    }

    /* éŸ³æ•ˆå’Œå›é¥‹æ•ˆæœ */
    .option.clicked {
      animation: pulse 0.3s ease-out;
    }

    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }

    .submit-button.clicked {
      animation: buttonPress 0.4s ease-out;
    }

    @keyframes buttonPress {
      0% { transform: translateY(-2px) scale(1.02); }
      50% { transform: translateY(2px) scale(0.98); }
      100% { transform: translateY(-2px) scale(1.02); }
    }

    .question.answered {
      border-color: var(--pink-accent);
      box-shadow: 0 0 20px rgba(244, 167, 185, 0.4);
    }

    .floating-hearts {
      position: absolute;
      pointer-events: none;
      color: var(--pink-accent);
      font-size: 1.5rem;
      animation: floatUp 2s ease-out forwards;
    }

    @keyframes floatUp {
      0% { 
        opacity: 1; 
        transform: translateY(0) scale(1); 
      }
      100% { 
        opacity: 0; 
        transform: translateY(-50px) scale(0.5); 
      }
    }

    .progress-celebration {
      position: relative;
      overflow: visible;
    }

    .progress-celebration::after {
      content: 'ğŸ‰';
      position: absolute;
      top: -30px;
      right: 0;
      font-size: 1.5rem;
      opacity: 0;
      animation: celebrate 0.8s ease-out;
    }

    @keyframes celebrate {
      0% { opacity: 0; transform: translateY(10px) scale(0.5); }
      50% { opacity: 1; transform: translateY(-10px) scale(1.2); }
      100% { opacity: 0; transform: translateY(-20px) scale(0.8); }
    }

    .result-entrance {
      animation: resultEntrance 1s ease-out;
    }

    @keyframes resultEntrance {
      0% { 
        opacity: 0; 
        transform: translateY(50px) scale(0.8); 
      }
      50% { 
        opacity: 0.8; 
        transform: translateY(-10px) scale(1.05); 
      }
      100% { 
        opacity: 1; 
        transform: translateY(0) scale(1); 
      }
    }

    @keyframes bounce {
      0%, 20%, 53%, 80%, 100% {
        transform: translate(0, 0);
      }
      40%, 43% {
        transform: translate(0, -15px);
      }
      70% {
        transform: translate(0, -7px);
      }
      90% {
        transform: translate(0, -3px);
      }
    }

    /* æ¢ç´¢æ›´å¤šå€åŸŸæ¨£å¼ */
    .explore-more {
      margin-top: 40px;
      padding: 30px;
      background: var(--card-bg);
      backdrop-filter: blur(20px);
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius);
      box-shadow: var(--shadow-soft);
      opacity: 0;
      animation: resultFadeIn 0.8s ease-out forwards;
    }

    .explore-header {
      text-align: center;
      margin-bottom: 30px;
    }

    .explore-header h2 {
      font-family: 'Caveat', 'Noto Sans TC', cursive;
      font-size: 2rem;
      font-weight: 700;
      background: var(--gradient-primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 10px;
    }

    .explore-header p {
      font-family: 'Kalam', 'Noto Sans TC', cursive;
      color: var(--text-secondary);
      font-size: 1.1rem;
    }

    .filter-section {
      margin-bottom: 30px;
    }

    .filter-group {
      margin-bottom: 20px;
    }

    .filter-label {
      display: block;
      font-family: 'Kalam', 'Noto Sans TC', cursive;
      font-size: 1.1rem;
      font-weight: 500;
      color: var(--text-primary);
      margin-bottom: 10px;
    }

    .filter-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .filter-btn {
      padding: 8px 16px;
      border: 2px solid var(--milktea-medium);
      background: var(--card-bg);
      border-radius: 20px;
      font-family: 'Inter', 'Noto Sans TC', sans-serif;
      font-size: 0.9rem;
      font-weight: 500;
      color: var(--text-primary);
      cursor: pointer;
      transition: all var(--animation-speed) ease;
      backdrop-filter: blur(5px);
    }

    .filter-btn:hover {
      background: var(--milktea-light);
      border-color: var(--pink-accent);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(244, 167, 185, 0.3);
    }

    .filter-btn.active {
      background: var(--gradient-secondary);
      border-color: var(--pink-accent);
      color: white;
      box-shadow: 0 4px 12px rgba(244, 167, 185, 0.4);
    }

    .animal-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 20px;
    }

    .animal-card {
      background: var(--milktea-light);
      border: 2px solid var(--border-color);
      border-radius: 16px;
      padding: 20px;
      transition: all var(--animation-speed) ease;
      cursor: pointer;
      position: relative;
      overflow: hidden;
    }

    .animal-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: var(--gradient-secondary);
      opacity: 0.6;
    }

    .animal-card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-hover);
      border-color: var(--pink-accent);
    }

    .card-header {
      display: flex;
      align-items: center;
      margin-bottom: 12px;
    }

    .card-emoji {
      font-size: 2rem;
      margin-right: 12px;
    }

    .card-title {
      flex: 1;
    }

    .card-species {
      font-family: 'Caveat', 'Noto Sans TC', cursive;
      font-size: 1.3rem;
      font-weight: 600;
      color: var(--text-primary);
      margin: 0;
    }

    .card-mbti {
      font-family: 'Inter', 'Noto Sans TC', sans-serif;
      font-size: 0.9rem;
      color: var(--text-accent);
      font-weight: 500;
    }

    .card-element {
      background: var(--gradient-accent);
      color: var(--text-primary);
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 0.8rem;
      font-weight: 500;
      white-space: nowrap;
    }

    .card-description {
      font-family: 'Kalam', 'Noto Sans TC', cursive;
      font-size: 1rem;
      line-height: 1.6;
      color: var(--text-secondary);
      margin-top: 12px;
    }

    .card-match {
      position: absolute;
      top: 15px;
      right: 15px;
      background: var(--gradient-secondary);
      color: white;
      padding: 4px 8px;
      border-radius: 8px;
      font-size: 0.7rem;
      font-weight: 600;
      opacity: 0;
      transform: scale(0);
      transition: all var(--animation-speed) ease;
    }

    .animal-card.perfect-match .card-match {
      opacity: 1;
      transform: scale(1);
    }

    @media (max-width: 768px) {
      .filter-buttons {
        flex-direction: column;
      }
      
      .filter-btn {
        text-align: center;
      }
      
      .animal-grid {
        grid-template-columns: 1fr;
      }
      
      .card-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
      }
      
      .card-element {
        align-self: flex-start;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>ğŸ±ğŸ¶ ç™¼ç¾æœ€åƒä½ çš„æ€§æ ¼å‹•ç‰©</h1>
      <p class="subtitle">é€é MBTI æ€§æ ¼æ¸¬é©—ï¼Œæ‰¾åˆ°å’Œä½ æœ€ç›¸ä¼¼çš„è²“è²“æˆ–ç‹—ç‹—</p>
    </div>
    
    <div class="progress-bar">
      <div class="progress-fill" id="progressFill"></div>
    </div>

    <form id="quizForm">
      <div class="question" style="animation-delay: 0.1s">
        <p><span class="question-number">1</span>ä½ é€šå¸¸åœ¨èšæœƒä¸­æœƒæ€éº¼åšï¼Ÿ</p>
        <div class="options-grid">
          <label class="option">
            <input type="radio" name="q1" value="E">
            <div class="option-content">ğŸ‰ å–œæ­¡å’Œæœ‹å‹äº’å‹•ï¼Œäº«å—ç†±é¬§æ°›åœ</div>
          </label>
          <label class="option">
            <input type="radio" name="q1" value="I">
            <div class="option-content">ğŸ¤” å–œæ­¡ç¨è‡ªæ€è€ƒï¼Œè§€å¯Ÿå‘¨åœç’°å¢ƒ</div>
          </label>
        </div>
      </div>

      <div class="question" style="animation-delay: 0.2s">
        <p><span class="question-number">2</span>ä½ åœ¨åšæ±ºç­–æ™‚è¼ƒå‚¾å‘ï¼š</p>
        <div class="options-grid">
          <label class="option">
            <input type="radio" name="q2" value="S">
            <div class="option-content">ğŸ“Š æ³¨é‡å¯¦éš›ç´°ç¯€å’Œå…·é«”äº‹å¯¦</div>
          </label>
          <label class="option">
            <input type="radio" name="q2" value="N">
            <div class="option-content">ğŸ’­ æ†‘ç›´è¦ºå’Œæƒ³åƒåŠ›æ€è€ƒ</div>
          </label>
        </div>
      </div>

      <div class="question" style="animation-delay: 0.3s">
        <p><span class="question-number">3</span>ä½ åšæ±ºå®šæ™‚è¼ƒçœ‹é‡ï¼š</p>
        <div class="options-grid">
          <label class="option">
            <input type="radio" name="q3" value="T">
            <div class="option-content">ğŸ§  é‚è¼¯åˆ†æèˆ‡å®¢è§€åˆ¤æ–·</div>
          </label>
          <label class="option">
            <input type="radio" name="q3" value="F">
            <div class="option-content">â¤ï¸ æƒ…æ„Ÿè€ƒé‡èˆ‡åƒ¹å€¼è§€å¿µ</div>
          </label>
        </div>
      </div>

      <div class="question" style="animation-delay: 0.4s">
        <p><span class="question-number">4</span>ä½ åå¥½çš„ç”Ÿæ´»æ–¹å¼ï¼š</p>
        <div class="options-grid">
          <label class="option">
            <input type="radio" name="q4" value="J">
            <div class="option-content">ğŸ“… è¨ˆç•«æœ‰åºï¼Œå–œæ­¡ç¢ºå®šæ€§</div>
          </label>
          <label class="option">
            <input type="radio" name="q4" value="P">
            <div class="option-content">ğŸ­ éš¨æ€§å½ˆæ€§ï¼Œä¿æŒé–‹æ”¾æ…‹åº¦</div>
          </label>
        </div>
      </div>

      <div class="question" style="animation-delay: 0.5s">
        <p><span class="question-number">5</span>ä»¥ä¸‹å“ªå€‹å…ƒç´ æœ€ç¬¦åˆä½ çš„æ€§æ ¼ï¼Ÿ</p>
        <div class="options-grid">
          <label class="option">
            <input type="radio" name="q5" value="fire">
            <div class="option-content">ğŸ”¥ ç«è±¡ - ç†±æƒ…æ´»åŠ›ï¼Œå……æ»¿èƒ½é‡</div>
          </label>
          <label class="option">
            <input type="radio" name="q5" value="earth">
            <div class="option-content">ğŸŒ åœŸè±¡ - ç©©é‡è¸å¯¦ï¼Œæ³¨é‡å®‰å…¨</div>
          </label>
          <label class="option">
            <input type="radio" name="q5" value="air">
            <div class="option-content">ğŸ’¨ é¢¨è±¡ - éˆæ´»è®Šé€šï¼Œæ€ç¶­æ•æ·</div>
          </label>
          <label class="option">
            <input type="radio" name="q5" value="water">
            <div class="option-content">ğŸ’§ æ°´è±¡ - æ„Ÿæ€§ç´°è†©ï¼Œæƒ…æ„Ÿè±å¯Œ</div>
          </label>
        </div>
      </div>

      <button type="button" class="submit-button" id="submitBtn" disabled>
        <span id="btnText">è«‹å®Œæˆæ‰€æœ‰é¡Œç›®</span>
      </button>
    </form>

    <div id="result" class="result" style="display: none;"></div>
    
    <!-- æ¢ç´¢æ›´å¤šç›¸ä¼¼å‹•ç‰©å€åŸŸ -->
    <div id="exploreMore" class="explore-more" style="display: none;">
      <div class="explore-header">
        <h2>ğŸ” æ¢ç´¢æ›´å¤šç›¸ä¼¼çš„æ¯›å­©</h2>
        <p>æ ¹æ“šä½ çš„ MBTI é¡å‹ï¼Œç™¼ç¾æ›´å¤šå€‹æ€§ç›¸è¿‘çš„è²“å’ªå’Œç‹—ç‹—</p>
      </div>
      
      <div class="filter-section">
        <div class="filter-group">
          <label class="filter-label">ğŸ§  é¸æ“‡ MBTI è±¡é™ï¼š</label>
          <div class="filter-buttons">
            <button class="filter-btn" data-filter="all" data-type="mbti">å…¨éƒ¨</button>
            <button class="filter-btn" data-filter="analysts" data-type="mbti">ç†å¿µå‹ (NT)</button>
            <button class="filter-btn" data-filter="diplomats" data-type="mbti">å¤–äº¤å‹ (NF)</button>
            <button class="filter-btn" data-filter="sentinels" data-type="mbti">å®ˆè­·å‹ (SJ)</button>
            <button class="filter-btn" data-filter="explorers" data-type="mbti">æ¢éšªå‹ (SP)</button>
          </div>
        </div>
        
        <div class="filter-group">
          <label class="filter-label">â­ é¸æ“‡æ˜Ÿåº§å…ƒç´ ï¼š</label>
          <div class="filter-buttons">
            <button class="filter-btn" data-filter="all" data-type="element">å…¨éƒ¨</button>
            <button class="filter-btn" data-filter="ç«è±¡" data-type="element">ğŸ”¥ ç«è±¡</button>
            <button class="filter-btn" data-filter="åœŸè±¡" data-type="element">ğŸŒ åœŸè±¡</button>
            <button class="filter-btn" data-filter="é¢¨è±¡" data-type="element">ğŸ’¨ é¢¨è±¡</button>
            <button class="filter-btn" data-filter="æ°´è±¡" data-type="element">ğŸ’§ æ°´è±¡</button>
          </div>
        </div>
        
        <div class="filter-group">
          <label class="filter-label">ğŸ¾ é¸æ“‡å‹•ç‰©é¡å‹ï¼š</label>
          <div class="filter-buttons">
            <button class="filter-btn" data-filter="all" data-type="species">å…¨éƒ¨</button>
            <button class="filter-btn" data-filter="cats" data-type="species">ğŸ± è²“å’ª</button>
            <button class="filter-btn" data-filter="dogs" data-type="species">ğŸ¶ ç‹—ç‹—</button>
          </div>
        </div>
      </div>
      
      <div id="animalGrid" class="animal-grid"></div>
    </div>
  </div>

  <script>
    // éŸ³æ•ˆç³»çµ±
    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
    
    // å‹•ç‰©æ•¸æ“šå­˜å„²
    let animalData = [];
    let currentUserResult = null;
    
    // è¼‰å…¥å‹•ç‰©æ•¸æ“š
    async function loadAnimalData() {
      try {
        const response = await fetch('./details.json');
        const data = await response.json();
        
        // å°‡å…§å‘å’Œå¤–å‘çš„æ•¸æ“šåˆä½µ
        animalData = [...data.I, ...data.E];
        console.log('å‹•ç‰©æ•¸æ“šè¼‰å…¥æˆåŠŸ:', animalData.length, 'ç­†è³‡æ–™');
      } catch (error) {
        console.error('è¼‰å…¥å‹•ç‰©æ•¸æ“šå¤±æ•—:', error);
        // å¦‚æœè¼‰å…¥å¤±æ•—ï¼Œä½¿ç”¨å‚™ç”¨æ•¸æ“š
        animalData = generateFallbackData();
      }
    }
    
    // å‚™ç”¨æ•¸æ“šï¼ˆç•¶ç„¡æ³•è¼‰å…¥ JSON æ™‚ä½¿ç”¨ï¼‰
    function generateFallbackData() {
      return [
        { mbti: 'ISTJ', zodiac_element: 'ç«è±¡', species: 'è‹±åœ‹çŸ­æ¯›è²“ (British Shorthair)', description: 'ç©©é‡å»å¶çˆ¾ç†±æƒ…ï¼Œçµ¦ä½ å®‰å…¨æ„Ÿçš„å®ˆè­·è€…' },
        { mbti: 'ISFJ', zodiac_element: 'ç«è±¡', species: 'å¸ƒå¶è²“ (Ragdoll)', description: 'ç†±æƒ…åˆè¦ªäººï¼Œæ˜¯æœ€æº«æš–çš„æ²»ç™’ç³»å¤¥ä¼´' },
        { mbti: 'ESTJ', zodiac_element: 'ç«è±¡', species: 'å¾·åœ‹ç‰§ç¾ŠçŠ¬ (German Shepherd)', description: 'è°æ˜ä¸”æœå¾ï¼Œå¤©ç”Ÿçš„é ˜å°è€…ï¼Œä¿è­·æ…¾å¼·' },
        { mbti: 'ESFJ', zodiac_element: 'ç«è±¡', species: 'é»ƒé‡‘çµçŠ¬ (Golden Retriever)', description: 'ç†±æƒ…å‹å–„ï¼Œå¸¶çµ¦ä½ æ»¿æ»¿é™½å…‰èˆ‡æ­£èƒ½é‡' },
        { mbti: 'INTJ', zodiac_element: 'åœŸè±¡', species: 'ç•°åœ‹çŸ­æ¯›è²“ (Exotic Shorthair)', description: 'ç©©é‡è°æ…§ï¼Œå†·éœè¨ˆç•«å‹äººæ ¼' },
        { mbti: 'INFJ', zodiac_element: 'åœŸè±¡', species: 'ä¿„ç¾…æ–¯è—è²“ (Russian Blue)', description: 'å„ªé›…ç¥ç§˜ï¼Œæ˜¯å…§æ–‚çš„ç†æƒ³ä¸»ç¾©è€…' }
      ];
    }
    
    // MBTI è±¡é™åˆ†é¡
    const mbtiGroups = {
      analysts: ['INTJ', 'INTP', 'ENTJ', 'ENTP'], // ç†å¿µå‹ (NT)
      diplomats: ['INFJ', 'INFP', 'ENFJ', 'ENFP'], // å¤–äº¤å‹ (NF)
      sentinels: ['ISTJ', 'ISFJ', 'ESTJ', 'ESFJ'], // å®ˆè­·å‹ (SJ)
      explorers: ['ISTP', 'ISFP', 'ESTP', 'ESFP']  // æ¢éšªå‹ (SP)
    };
    
    // å–å¾—å‹•ç‰©è¡¨æƒ…ç¬¦è™Ÿ
    function getAnimalEmoji(species) {
      const cats = ['è²“', 'Cat', 'cat'];
      const dogs = ['çŠ¬', 'ç‹—', 'Dog', 'dog'];
      
      if (cats.some(keyword => species.includes(keyword))) return 'ğŸ±';
      if (dogs.some(keyword => species.includes(keyword))) return 'ğŸ¶';
      return 'ğŸ¾';
    }
    
    // å–å¾—ç›¸ä¼¼åº¦è©•åˆ†
    function getSimilarityScore(animal, userMbti, userElement) {
      let score = 0;
      
      // MBTI å®Œå…¨åŒ¹é…
      if (animal.mbti === userMbti) score += 100;
      
      // MBTI è±¡é™åŒ¹é…
      const userGroup = Object.keys(mbtiGroups).find(group => 
        mbtiGroups[group].includes(userMbti)
      );
      const animalGroup = Object.keys(mbtiGroups).find(group => 
        mbtiGroups[group].includes(animal.mbti)
      );
      if (userGroup === animalGroup && animal.mbti !== userMbti) score += 60;
      
      // æ˜Ÿåº§å…ƒç´ åŒ¹é…
      if (animal.zodiac_element === userElement) score += 40;
      
      // å…¶ä»–éƒ¨åˆ†åŒ¹é…
      if (userMbti[0] === animal.mbti[0]) score += 20; // I/E åŒ¹é…
      if (userMbti[1] === animal.mbti[1]) score += 20; // S/N åŒ¹é…
      if (userMbti[2] === animal.mbti[2]) score += 20; // T/F åŒ¹é…
      if (userMbti[3] === animal.mbti[3]) score += 20; // J/P åŒ¹é…
      
      return score;
    }
    
    // ç¯©é¸å‹•ç‰©æ•¸æ“š
    function filterAnimals(mbtiFilter, elementFilter, speciesFilter) {
      let filtered = animalData;
      
      // MBTI è±¡é™ç¯©é¸
      if (mbtiFilter !== 'all') {
        if (mbtiGroups[mbtiFilter]) {
          filtered = filtered.filter(animal => 
            mbtiGroups[mbtiFilter].includes(animal.mbti)
          );
        }
      }
      
      // æ˜Ÿåº§å…ƒç´ ç¯©é¸
      if (elementFilter !== 'all') {
        filtered = filtered.filter(animal => 
          animal.zodiac_element.includes(elementFilter)
        );
      }
      
      // å‹•ç‰©é¡å‹ç¯©é¸
      if (speciesFilter !== 'all') {
        if (speciesFilter === 'cats') {
          filtered = filtered.filter(animal => 
            ['è²“', 'Cat', 'cat'].some(keyword => animal.species.includes(keyword))
          );
        } else if (speciesFilter === 'dogs') {
          filtered = filtered.filter(animal => 
            ['çŠ¬', 'ç‹—', 'Dog', 'dog'].some(keyword => animal.species.includes(keyword))
          );
        }
      }
      
      return filtered;
    }
    
    // é¡¯ç¤ºå‹•ç‰©å¡ç‰‡
    function displayAnimals(animals, userMbti = null, userElement = null) {
      const grid = document.getElementById('animalGrid');
      
      // å¦‚æœæœ‰ä½¿ç”¨è€…çµæœï¼ŒæŒ‰ç›¸ä¼¼åº¦æ’åº
      if (userMbti && userElement) {
        animals = animals.map(animal => ({
          ...animal,
          similarity: getSimilarityScore(animal, userMbti, userElement)
        })).sort((a, b) => b.similarity - a.similarity);
      }
      
      grid.innerHTML = animals.map(animal => {
        const emoji = getAnimalEmoji(animal.species);
        const isPerfectMatch = userMbti && userElement && 
          animal.mbti === userMbti && animal.zodiac_element.includes(userElement);
        
        return `
          <div class="animal-card ${isPerfectMatch ? 'perfect-match' : ''}" onclick="playClickSound()">
            ${isPerfectMatch ? '<div class="card-match">å®Œç¾åŒ¹é…!</div>' : ''}
            <div class="card-header">
              <div class="card-emoji">${emoji}</div>
              <div class="card-title">
                <h3 class="card-species">${animal.species}</h3>
                <div class="card-mbti">${animal.mbti}</div>
              </div>
              <div class="card-element">${animal.zodiac_element}</div>
            </div>
            <p class="card-description">${animal.description}</p>
          </div>
        `;
      }).join('');
      
      // æ·»åŠ å¡ç‰‡å‡ºç¾å‹•ç•«
      const cards = grid.querySelectorAll('.animal-card');
      cards.forEach((card, index) => {
        card.style.opacity = '0';
        card.style.transform = 'translateY(20px)';
        setTimeout(() => {
          card.style.transition = 'all 0.5s ease';
          card.style.opacity = '1';
          card.style.transform = 'translateY(0)';
        }, index * 100);
      });
    }
    
    // è¨­ç½®ç¯©é¸å™¨äº‹ä»¶ç›£è½
    function setupFilters() {
      const filterBtns = document.querySelectorAll('.filter-btn');
      let currentFilters = {
        mbti: 'all',
        element: 'all',
        species: 'all'
      };
      
      filterBtns.forEach(btn => {
        btn.addEventListener('click', function() {
          const filterType = this.dataset.type;
          const filterValue = this.dataset.filter;
          
          // æ›´æ–°åŒé¡å‹æŒ‰éˆ•çš„ç‹€æ…‹
          document.querySelectorAll(`[data-type="${filterType}"]`).forEach(b => 
            b.classList.remove('active')
          );
          this.classList.add('active');
          
          // æ›´æ–°ç¯©é¸æ¢ä»¶
          currentFilters[filterType] = filterValue;
          
          // æ’­æ”¾é»æ“ŠéŸ³æ•ˆ
          playClickSound();
          
          // æ‡‰ç”¨ç¯©é¸
          const filtered = filterAnimals(
            currentFilters.mbti, 
            currentFilters.element, 
            currentFilters.species
          );
          
          displayAnimals(
            filtered, 
            currentUserResult?.mbti, 
            currentUserResult?.element
          );
        });
      });
      
      // è¨­ç½®é»˜èªé¸ä¸­ç‹€æ…‹
      document.querySelectorAll('[data-filter="all"]').forEach(btn => {
        btn.classList.add('active');
      });
    }
    
    function playSound(frequency, duration, type = 'sine') {
      try {
        const oscillator = audioContext.createOscillator();
        const gainNode = audioContext.createGain();
        
        oscillator.connect(gainNode);
        gainNode.connect(audioContext.destination);
        
        oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime);
        oscillator.type = type;
        
        gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);
        
        oscillator.start(audioContext.currentTime);
        oscillator.stop(audioContext.currentTime + duration);
      } catch (e) {
        console.log('Audio not supported');
      }
    }

    function playClickSound() {
      playSound(800, 0.1, 'sine');
    }

    function playSuccessSound() {
      playSound(523, 0.2, 'sine'); // C5
      setTimeout(() => playSound(659, 0.2, 'sine'), 100); // E5
      setTimeout(() => playSound(784, 0.3, 'sine'), 200); // G5
    }

    function playCompletionSound() {
      const notes = [261, 329, 392, 523]; // C-E-G-C chord
      notes.forEach((note, index) => {
        setTimeout(() => playSound(note, 0.5, 'sine'), index * 100);
      });
    }

    // UI å›é¥‹æ•ˆæœ
    function createFloatingHearts(element) {
      for (let i = 0; i < 3; i++) {
        const heart = document.createElement('div');
        heart.className = 'floating-hearts';
        heart.textContent = 'â™¡';
        heart.style.left = Math.random() * 50 + 'px';
        heart.style.animationDelay = i * 0.2 + 's';
        element.style.position = 'relative';
        element.appendChild(heart);
        
        setTimeout(() => heart.remove(), 2000);
      }
    }

    function addProgressCelebration() {
      const progressBar = document.querySelector('.progress-bar');
      progressBar.classList.add('progress-celebration');
      setTimeout(() => {
        progressBar.classList.remove('progress-celebration');
      }, 800);
    }

    // é€²åº¦æ¢æ›´æ–°å’Œè¡¨å–®é©—è­‰
    const form = document.getElementById('quizForm');
    const progressFill = document.getElementById('progressFill');
    const submitBtn = document.getElementById('submitBtn');
    const btnText = document.getElementById('btnText');
    const totalQuestions = 5;

    function updateProgress() {
      const answeredQuestions = form.querySelectorAll('input[type="radio"]:checked').length;
      const progress = (answeredQuestions / totalQuestions) * 100;
      
      // å¹³æ»‘å‹•ç•«æ›´æ–°é€²åº¦æ¢
      progressFill.style.width = progress + '%';
      
      // å¦‚æœæœ‰é€²æ­¥ï¼Œæ’­æ”¾éŸ³æ•ˆå’Œå‹•ç•«
      if (progress > 0) {
        playClickSound();
        if (progress === 100) {
          addProgressCelebration();
          playCompletionSound();
        }
      }
      
      if (answeredQuestions === totalQuestions) {
        submitBtn.disabled = false;
        submitBtn.style.background = 'var(--gradient-primary)';
        btnText.textContent = 'âœ¨ æŸ¥çœ‹æœ€åƒæˆ‘çš„æ€§æ ¼å‹•ç‰©';
        
        // æŒ‰éˆ•æº–å‚™å¥½çš„è¦–è¦ºæ•ˆæœ
        submitBtn.style.animation = 'pulse 1s ease-in-out infinite';
      } else {
        submitBtn.disabled = true;
        submitBtn.style.background = 'var(--khaki-accent)';
        submitBtn.style.animation = 'none';
        btnText.textContent = `é‚„éœ€å›ç­” ${totalQuestions - answeredQuestions} å€‹å•é¡Œ â™¡`;
      }
    }

    // ç‚ºæ‰€æœ‰ radio æŒ‰éˆ•æ·»åŠ å¢å¼·çš„äº‹ä»¶ç›£è½å™¨
    form.querySelectorAll('input[type="radio"]').forEach(radio => {
      radio.addEventListener('change', function() {
        updateProgress();
        
        // æ·»åŠ è¦–è¦ºå›é¥‹
        const option = this.closest('.option');
        const question = this.closest('.question');
        
        option.classList.add('clicked');
        question.classList.add('answered');
        
        // å‰µå»ºæµ®å‹•æ„›å¿ƒæ•ˆæœ
        createFloatingHearts(option);
        
        setTimeout(() => {
          option.classList.remove('clicked');
        }, 300);
      });

      // æ·»åŠ æ‡¸åœéŸ³æ•ˆ
      radio.closest('.option').addEventListener('mouseenter', function() {
        if (!this.querySelector('input').checked) {
          playSound(400, 0.05, 'sine');
        }
      });
    });

    // å¢å¼·çš„æäº¤æŒ‰éˆ•äº‹ä»¶
    document.getElementById('submitBtn').addEventListener('click', function() {
      console.log('æäº¤æŒ‰éˆ•è¢«é»æ“Š, disabled:', this.disabled);
      
      if (!this.disabled) {
        console.log('æŒ‰éˆ•æœªè¢«ç¦ç”¨ï¼Œé–‹å§‹è™•ç†...');
        
        // ç«‹å³é¡¯ç¤ºçµæœï¼Œä¸ä¾è³´è¤‡é›œçš„å‹•ç•«æˆ–éŸ³æ•ˆ
        try {
          showResult();
          console.log('showResult èª¿ç”¨æˆåŠŸ');
        } catch (error) {
          console.error('showResult èª¿ç”¨å¤±æ•—:', error);
        }
        
        // æ·»åŠ è¦–è¦ºåé¥‹
        this.classList.add('clicked');
        setTimeout(() => {
          this.classList.remove('clicked');
        }, 400);
        
        // å˜—è©¦æ’­æ”¾éŸ³æ•ˆ
        try {
          playSuccessSound();
        } catch (e) {
          console.log('éŸ³æ•ˆæ’­æ”¾å¤±æ•—:', e);
        }
      } else {
        console.log('æŒ‰éˆ•è¢«ç¦ç”¨ï¼Œç„¡æ³•æäº¤');
      }
    });

    // æ¸¬é©—çµæœå°æ‡‰è¡¨
    const quizMapping = {
      ISTJ: {
        fire: {pet: 'è‹±åœ‹çŸ­æ¯›è²“ British Shorthair', desc: 'ç©©é‡å»å¶çˆ¾ç†±æƒ…ï¼Œçµ¦ä½ å®‰å…¨æ„Ÿçš„å®ˆè­·è€…', emoji: 'ğŸ±'},
        earth: {pet: 'è˜‡æ ¼è˜­æ‘ºè€³è²“ Scottish Fold', desc: 'å®‰éœä¹–å·§ï¼Œæ˜¯ç©©å®šç”Ÿæ´»çš„æœ€ä½³å¤¥ä¼´', emoji: 'ğŸ±'},
        air: {pet: 'ç¾åœ‹çŸ­æ¯›è²“ American Shorthair', desc: 'ç†æ€§ä¸­å¸¶é»éˆæ´»ï¼Œèƒ½è¼•é¬†æ‡‰å°è®ŠåŒ–', emoji: 'ğŸ±'},
        water: {pet: 'å–œé¦¬æ‹‰é›…è²“ Himalayan', desc: 'å…§æ–‚æº«å’Œï¼Œé»˜é»˜å®ˆè­·ä½ ', emoji: 'ğŸ±'}
      },
      ISFJ: {
        fire: {pet: 'å¸ƒå¶è²“ Ragdoll', desc: 'ç†±æƒ…åˆè¦ªäººï¼Œæ˜¯æœ€æº«æš–çš„æ²»ç™’ç³»å¤¥ä¼´', emoji: 'ğŸ±'},
        earth: {pet: 'æ³¢æ–¯è²“ Persian', desc: 'é«˜é›…å®‰éœï¼Œå°ä½ å¿ èª ä¸æ¸', emoji: 'ğŸ±'},
        air: {pet: 'æš¹ç¾…è²“ Siamese', desc: 'æ©Ÿæ™ºè²¼å¿ƒï¼Œç¸½åœ¨èº«é‚Šé»˜é»˜å®ˆè­·', emoji: 'ğŸ±'},
        water: {pet: 'ç·¬å› è²“ Maine Coon', desc: 'å·¨å¤§å»æº«æŸ”ï¼Œçµ¦ä½ æ»¿æ»¿å®‰å…¨æ„Ÿ', emoji: 'ğŸ±'}
      },
      INFJ: {
        fire: {pet: 'é˜¿æ¯”è¥¿å°¼äºè²“ Abyssinian', desc: 'ç†±æƒ…ä¸”æœ‰é ˜å°æ°£è³ªï¼Œå…§å¿ƒå»æµªæ¼«æ·±æƒ…', emoji: 'ğŸ±'},
        earth: {pet: 'ä¿„ç¾…æ–¯è—è²“ Russian Blue', desc: 'å„ªé›…ç¥ç§˜ï¼Œæ˜¯å…§æ–‚çš„ç†æƒ³ä¸»ç¾©è€…', emoji: 'ğŸ±'},
        air: {pet: 'æš¹ç¾…è²“ Siamese', desc: 'å‰µæ„ç„¡é™ï¼Œç¸½æœ‰å‡ºå…¶ä¸æ„çš„é»å­', emoji: 'ğŸ±'},
        water: {pet: 'ç·¬ç”¸è²“ Burmese', desc: 'æ„Ÿæƒ…è±å¯Œï¼Œæº«æŸ”ç´°è†©ï¼Œå–œæ­¡æ·±åº¦é€£çµ', emoji: 'ğŸ±'}
      },
      INTJ: {
        fire: {pet: 'å­ŸåŠ æ‹‰è²“ Bengal', desc: 'é‡æ€§åè¶³ï¼Œå»æš—è—ç­–ç•¥ï¼Œæ˜¯å†’éšªå®¶å‹æ€è€ƒè€…', emoji: 'ğŸ±'},
        earth: {pet: 'ç•°åœ‹çŸ­æ¯›è²“ Exotic Shorthair', desc: 'ç©©é‡è°æ…§ï¼Œå†·éœè¨ˆç•«å‹äººæ ¼', emoji: 'ğŸ±'},
        air: {pet: 'æš¹ç¾…è²“ Siamese', desc: 'å°å·§éˆæ´»ï¼Œæ“…é•·ç­–ç•¥ï¼ŒæŒæ¡å…¨å±€', emoji: 'ğŸ±'},
        water: {pet: 'æ–¯èŠ¬å…‹æ–¯è²“ Sphynx', desc: 'ç¥ç§˜å†·é…·ï¼Œå»å°è¦ªè¿‘çš„äººå±•ç¾æŸ”æƒ…', emoji: 'ğŸ±'}
      },
      ISTP: {
        fire: {pet: 'å­ŸåŠ æ‹‰è²“ Bengal', desc: 'ç²¾åŠ›æ—ºç››ï¼Œç†±æ„›æŒ‘æˆ°ï¼Œç¸½åœ¨è¡Œå‹•ä¸­æˆé•·', emoji: 'ğŸ±'},
        earth: {pet: 'æ—¥æœ¬çŸ­å°¾è²“ Japanese Bobtail', desc: 'éˆæ´»åˆç©©å®šï¼Œç†±æ„›è‡ªç”±å»ä¸å¤±è¦å¾‹', emoji: 'ğŸ±'},
        air: {pet: 'ç¾åœ‹çŸ­æ¯›è²“ American Shorthair', desc: 'åæ‡‰æ•æ·ï¼Œæ“…é•·ç”¨å‰µæ„è§£æ±ºå•é¡Œ', emoji: 'ğŸ±'},
        water: {pet: 'æš¹ç¾…è²“ Siamese', desc: 'æ„Ÿæ€§ä¸­å¸¶å†’éšªï¼Œé¡˜æ„é™ªä¼´ä¸¦æ¢ç´¢ä¸–ç•Œ', emoji: 'ğŸ±'}
      },
      ISFP: {
        fire: {pet: 'ç´…è™æ–‘è²“ Red Tabby', desc: 'ç†±æƒ…è—è¡“å®¶ï¼Œç¸½èƒ½è®“ç”Ÿæ´»å……æ»¿è‰²å½©', emoji: 'ğŸ±'},
        earth: {pet: 'æŒªå¨æ£®æ—è²“ Norwegian Forest Cat', desc: 'å…¸é›…åˆç†±æ„›è‡ªç„¶ï¼Œåƒæ£®æ—è©©äººèˆ¬è‡ªç”±', emoji: 'ğŸ±'},
        air: {pet: 'ç¾åœ‹çŸ­æ¯›è²“ American Shorthair', desc: 'è‡ªç”±éˆé­‚ï¼Œæ“æœ‰è°æ˜çš„å°è…¦è¢‹', emoji: 'ğŸ±'},
        water: {pet: 'å¸ƒå¶è²“ Ragdoll', desc: 'æŸ”æƒ…ä¼¼æ°´ï¼Œç¸½èƒ½çµ¦äºˆå®‰å¿ƒèˆ‡æº«æš–', emoji: 'ğŸ±'}
      },
      INFP: {
        fire: {pet: 'ç¾åœ‹çŸ­æ¯›è²“ American Shorthair', desc: 'æµªæ¼«ç†æƒ³å®¶ï¼Œå»åˆç†±æƒ…ï¼Œåƒç«ç„°èˆ¬æº«æš–', emoji: 'ğŸ±'},
        earth: {pet: 'å¸ƒå¶è²“ Ragdoll', desc: 'ç´”çœŸæº«æŸ”ï¼Œçµ¦äººæœ€è¸å¯¦çš„é™ªä¼´', emoji: 'ğŸ±'},
        air: {pet: 'åº·æ²ƒçˆ¾é›·å…‹æ–¯è²“ Cornish Rex', desc: 'è—è¡“éˆé­‚ï¼Œè…¦è¢‹è£¡å……æ»¿å¥‡å¦™é»å­', emoji: 'ğŸ±'},
        water: {pet: 'å–œé¦¬æ‹‰é›…è²“ Himalayan', desc: 'æƒ…æ„Ÿè±å¯Œï¼Œæœ€æ‡‚å¿ƒéˆæ·±è™•çš„å¤¢æƒ³å®¶', emoji: 'ğŸ±'}
      },
      INTP: {
        fire: {pet: 'é˜¿æ¯”è¥¿å°¼äºè²“ Abyssinian', desc: 'è°æ˜æ´»æ½‘ï¼Œç¸½æœ‰æ–°å¥‡å‰µæ„ï¼Œå……æ»¿å†’éšªç²¾ç¥', emoji: 'ğŸ±'},
        earth: {pet: 'è‹±åœ‹çŸ­æ¯›è²“ British Shorthair', desc: 'å†·éœç†æ™ºï¼Œæ˜¯åˆ†æèˆ‡ç©©å®šä¸¦å­˜çš„å®Œç¾å…¸ç¯„', emoji: 'ğŸ±'},
        air: {pet: 'æš¹ç¾…è²“ Siamese', desc: 'è°æ˜ä¼¶ä¿ï¼Œè§€å¯ŸåŠ›è¶…ç¾¤ï¼Œåƒå°ç§‘å­¸å®¶ä¸€æ¨£å¥½å¥‡å¿ƒçˆ†æ£š', emoji: 'ğŸ±'},
        water: {pet: 'ä¿„ç¾…æ–¯è—è²“ Russian Blue', desc: 'è¡¨é¢å†·é…·ï¼Œå…§å¿ƒæŸ”æƒ…ï¼Œæ„Ÿæ€§èˆ‡ç†æ€§å…¼å…·', emoji: 'ğŸ±'}
      },
      ESTJ: {
        fire: {pet: 'å¾·åœ‹ç‰§ç¾ŠçŠ¬ German Shepherd', desc: 'è°æ˜ä¸”æœå¾ï¼Œå¤©ç”Ÿçš„é ˜å°è€…ï¼Œä¿è­·æ…¾å¼·', emoji: 'ğŸ•'},
        earth: {pet: 'æ‹‰å¸ƒæ‹‰å¤š Labrador Retriever', desc: 'å¿ èª ç©©é‡ï¼Œæ˜¯æœ€å€¼å¾—ä¿¡ä»»çš„å¤¥ä¼´', emoji: 'ğŸ•'},
        air: {pet: 'æœè³“çŠ¬ Doberman Pinscher', desc: 'åæ‡‰æ•æ·ã€æ²‰è‘—å†·éœï¼Œæ˜¯ç­–ç•¥å‹å®ˆè­·è€…', emoji: 'ğŸ•'},
        water: {pet: 'ç§‹ç”°çŠ¬ Akita Inu', desc: 'å…§æ–‚å¿ å¿ƒï¼Œä¿è­·æ…¾æ¥µå¼·ï¼Œæ˜¯æ²‰ç©©çš„å®ˆè­·è€…', emoji: 'ğŸ•'}
      },
      ESFJ: {
        fire: {pet: 'é»ƒé‡‘çµçŠ¬ Golden Retriever', desc: 'ç†±æƒ…å‹å–„ï¼Œå¸¶çµ¦ä½ æ»¿æ»¿é™½å…‰èˆ‡æ­£èƒ½é‡', emoji: 'ğŸ•'},
        earth: {pet: 'è–ä¼¯ç´çŠ¬ Saint Bernard', desc: 'å·¨å¤§å»æº«æŸ”ï¼Œå¤©ç„¶çš„å®ˆè­·å¤©ä½¿ï¼Œè®“ä½ å®‰å¿ƒ', emoji: 'ğŸ•'},
        air: {pet: 'å¯å¡çŠ¬ Cocker Spaniel', desc: 'é–‹æœ—æ„›ç©ï¼Œå–œæ­¡äº’å‹•ï¼Œæ˜¯å¿«æ¨‚å°å¹«æ‰‹', emoji: 'ğŸ•'},
        water: {pet: 'å¡ç“¦åˆ©ç‹æŸ¥ç†çµçŠ¬ Cavalier King Charles Spaniel', desc: 'æ„Ÿæƒ…è±å¯Œï¼Œæœ€æ„›çª©åœ¨ä½ æ‡·è£¡ï¼Œæ˜¯æº«æŸ”é»äººçš„ä¼´ä¾¶', emoji: 'ğŸ•'}
      },
      ENFJ: {
        fire: {pet: 'é‚Šå¢ƒç‰§ç¾ŠçŠ¬ Border Collie', desc: 'è°æ˜ç†±æƒ…ï¼Œæ“…é•·å¸¶é ˜ç¾¤é«”ï¼Œæ´»åŠ›æ»¿æ»¿', emoji: 'ğŸ•'},
        earth: {pet: 'ä¼¯æ©å±±çŠ¬ Bernese Mountain Dog', desc: 'æº«æŸ”å¯é ï¼Œå¤©ç„¶çš„å®ˆè­·è€…ï¼Œæœ€æœ‰å®‰å…¨æ„Ÿ', emoji: 'ğŸ•'},
        air: {pet: 'è–©æ‘©è€¶ Samoyed', desc: 'å¾®ç¬‘å¤©ä½¿ï¼Œæ¨‚è§€æ´»æ½‘ï¼Œå‚³éå¿«æ¨‚èƒ½é‡', emoji: 'ğŸ•'},
        water: {pet: 'æ„›çˆ¾è˜­é›ªé”çŠ¬ Irish Setter', desc: 'æƒ…æ„Ÿç´°è†©ï¼Œæµªæ¼«æº«æŸ”ï¼Œç†±æ„›æ·±åº¦é€£çµ', emoji: 'ğŸ•'}
      },
      ENTJ: {
        fire: {pet: 'ç¾…å¨ç´çŠ¬ Rottweiler', desc: 'å¼·å‹¢é ˜å°ï¼Œä¿è­·æ…¾å¼·ï¼Œæ˜¯å¤©ç”Ÿçš„ç‹è€…', emoji: 'ğŸ•'},
        earth: {pet: 'å¤§ä¸¹çŠ¬ Great Dane', desc: 'é«˜è²´ç©©é‡ï¼Œæ°£å ´å¼·å¤§ï¼Œæ˜¯é ˜è¢–å‹å®ˆè­·è€…', emoji: 'ğŸ•'},
        air: {pet: 'å¨ç‘ªçµçŠ¬ Weimaraner', desc: 'è°æ˜æ•æ·ï¼Œç­–ç•¥æ€ç¶­ï¼Œæ˜¯å®Œç¾çš„åŸ·è¡Œè€…', emoji: 'ğŸ•'},
        water: {pet: 'ç´èŠ¬è˜­çŠ¬ Newfoundland', desc: 'æº«å’Œå·¨äººï¼Œæƒ…æ„Ÿè±å¯Œï¼Œå…¼å…·åŠ›é‡èˆ‡æº«æŸ”', emoji: 'ğŸ•'}
      },
      ESTP: {
        fire: {pet: 'å‚‘å…‹ç¾…ç´ ã¹´ Jack Russell Terrier', desc: 'æ´»åŠ›å……æ²›ï¼Œå–œæ­¡å†’éšªï¼Œæ˜¯æœ€ä½³é‹å‹•å¤¥ä¼´', emoji: 'ğŸ•'},
        earth: {pet: 'é¬¥ç‰›çŠ¬ Bulldog', desc: 'å …éŸŒç©©é‡ï¼Œè…³è¸å¯¦åœ°ï¼Œæ˜¯å¯é çš„é™ªä¼´è€…', emoji: 'ğŸ•'},
        air: {pet: 'æ¯”æ ¼çŠ¬ Beagle', desc: 'å¥½å¥‡å¿ƒæ—ºç››ï¼Œæ©Ÿæ™ºéˆæ´»ï¼Œç¸½èƒ½å¸¶ä¾†é©šå–œ', emoji: 'ğŸ•'},
        water: {pet: 'æ‹‰å¸ƒæ‹‰å¤š Labrador Retriever', desc: 'æº«æš–è¦ªå’Œï¼Œæƒ…æ„Ÿè±å¯Œï¼Œæ˜¯æœ€ä½³ç™‚ç™’å¤¥ä¼´', emoji: 'ğŸ•'}
      },
      ESFP: {
        fire: {pet: 'æŸ¯åŸºçŠ¬ Corgi', desc: 'é–‹æœ—æ´»æ½‘ï¼Œç¸½æ˜¯å¸¶ä¾†æ­¡æ¨‚å’Œæ­£èƒ½é‡', emoji: 'ğŸ•'},
        earth: {pet: 'æ³•åœ‹é¬¥ç‰›çŠ¬ French Bulldog', desc: 'å¯æ„›ç©©é‡ï¼Œæ˜¯ç”Ÿæ´»ä¸­çš„å°ç¢ºå¹¸', emoji: 'ğŸ•'},
        air: {pet: 'åšç¾çŠ¬ Pomeranian', desc: 'æ©Ÿéˆå¯æ„›ï¼Œå……æ»¿å‰µæ„ï¼Œæ˜¯ç¤¾äº¤å°å¤©ä½¿', emoji: 'ğŸ•'},
        water: {pet: 'æŸ¥ç†ç‹çµçŠ¬ Cavalier King Charles Spaniel', desc: 'æº«æŸ”æ„Ÿæ€§ï¼Œæƒ…æ„Ÿç´°è†©ï¼Œæœ€æ‡‚ä½ çš„å¿ƒ', emoji: 'ğŸ•'}
      },
      ENFP: {
        fire: {pet: 'æ¾³æ´²ç‰§ç¾ŠçŠ¬ Australian Shepherd', desc: 'ç†±æƒ…å‰µæ–°ï¼Œå……æ»¿æƒ³åƒåŠ›ï¼Œæ˜¯å¤¢æƒ³å¯¦è¸è€…', emoji: 'ğŸ•'},
        earth: {pet: 'é»ƒé‡‘çµçŠ¬ Golden Retriever', desc: 'æº«æš–å¯é ï¼Œçµ¦äººå®‰å…¨æ„Ÿï¼Œæ˜¯ç†æƒ³ä¸»ç¾©çš„å®ˆè­·è€…', emoji: 'ğŸ•'},
        air: {pet: 'é‚Šå¢ƒç‰§ç¾ŠçŠ¬ Border Collie', desc: 'è°æ˜éˆæ´»ï¼Œå‰µæ„ç„¡é™ï¼Œæ˜¯é»å­ç‹', emoji: 'ğŸ•'},
        water: {pet: 'æ„›çˆ¾è˜­é›ªé”çŠ¬ Irish Setter', desc: 'æµªæ¼«æ„Ÿæ€§ï¼Œæƒ…æ„Ÿè±å¯Œï¼Œæ˜¯å¿ƒéˆç›¸é€šçš„å¤¥ä¼´', emoji: 'ğŸ•'}
      },
      ENTP: {
        fire: {pet: 'å‚‘å…‹ç¾…ç´ ã¹´ Jack Russell Terrier', desc: 'ç²¾åŠ›æ—ºç››ï¼Œå‰µæ–°æ€ç¶­ï¼Œç¸½æœ‰æ–°é»å­', emoji: 'ğŸ•'},
        earth: {pet: 'é‚Šå¢ƒç‰§ç¾ŠçŠ¬ Border Collie', desc: 'è°æ˜ç©©é‡ï¼Œæ“…é•·åˆ†æï¼Œæ˜¯ç­–ç•¥å¤§å¸«', emoji: 'ğŸ•'},
        air: {pet: 'æ¯”æ ¼çŠ¬ Beagle', desc: 'å¥½å¥‡å¿ƒå¼·ï¼Œæ©Ÿæ™ºå¹½é»˜ï¼Œæ˜¯å¤©ç”Ÿçš„æ¢éšªå®¶', emoji: 'ğŸ•'},
        water: {pet: 'è–©æ‘©è€¶ Samoyed', desc: 'æº«æš–è¦ªå’Œï¼Œæƒ…æ„Ÿè±å¯Œï¼Œæ“…é•·äººéš›äº¤å¾€', emoji: 'ğŸ•'}
      }
    };

    function showResult() {
      console.log('showResult å‡½æ•¸è¢«èª¿ç”¨');
      
      const formData = new FormData(form);
      const mbti = formData.get('q1') + formData.get('q2') + formData.get('q3') + formData.get('q4');
      const element = formData.get('q5');
      
      console.log('MBTI:', mbti, 'Element:', element);
      
      // å°‡å…ƒç´ åç¨±è½‰æ›ç‚ºä¸­æ–‡
      const elementMap = {
        'fire': 'ç«è±¡',
        'earth': 'åœŸè±¡', 
        'air': 'é¢¨è±¡',
        'water': 'æ°´è±¡'
      };
      const elementChinese = elementMap[element];
      
      // å„²å­˜ä½¿ç”¨è€…çµæœä¾›ç¯©é¸ä½¿ç”¨  
      currentUserResult = {
        mbti: mbti,
        element: elementChinese
      };
      
      // æª¢æŸ¥ quizMapping æ˜¯å¦å­˜åœ¨
      if (!quizMapping) {
        console.error('quizMapping æœªå®šç¾©');
        return;
      }
      
      if (!quizMapping[mbti]) {
        console.error('æ‰¾ä¸åˆ° MBTI é¡å‹:', mbti);
        return;
      }
      
      if (!quizMapping[mbti][element]) {
        console.error('æ‰¾ä¸åˆ°å…ƒç´ :', element, 'å°æ‡‰çš„çµæœ');
        return;
      }
      
      const result = quizMapping[mbti][element];
      console.log('çµæœ:', result);
      
      const resultDiv = document.getElementById('result');
      if (!resultDiv) {
        console.error('æ‰¾ä¸åˆ° result div');
        return;
      }
      
      try {
        resultDiv.innerHTML = `
          <div class="ig-result-card">
            <div class="stories-header">
              <div class="stories-profile">
                <div class="stories-avatar">âœ¨</div>
                <div class="stories-info">
                  <div class="stories-username">MBTIå‹•ç‰©å åœ</div>
                  <div class="stories-time">ç¾æ™‚å‹•æ…‹</div>
                </div>
              </div>
              <div class="stories-options">â‹¯</div>
            </div>

            <!-- å¯æ»¾å‹•çš„å…§å®¹å€åŸŸ -->
            <div class="scrollable-content" style="flex: 1; overflow-y: auto; padding-right: 4px;">
              <div class="decorative-hearts">ğŸ’–âœ¨</div>
              <div class="decorative-sparkles">âœ¨ğŸ’«</div>
            
            <div class="result-header">
              <div class="result-emoji-container">
                <div class="emoji-glow"></div>
                <div class="result-emoji">${result.emoji}</div>
              </div>
              <h2 class="result-title">æœ€åƒä½ çš„æ€§æ ¼å‹•ç‰©æ˜¯</h2>
              <h3 class="result-pet-name">${result.pet}</h3>
            </div>
            
            <p class="result-description">${result.desc}</p>
            
            <div style="text-align: center; margin-bottom: 12px;">
              <div class="result-mbti-badge">âœ¨ ${mbti} Â· ${elementChinese} âœ¨</div>
            </div>

            <!-- ç›¸ä¼¼å‹•ç‰©å€åŸŸ -->
            <div class="similar-animals">
              <div class="similar-title">
                ğŸ’« å€‹æ€§ç›¸ä¼¼çš„å¤¥ä¼´
              </div>
              <div class="animal-row" id="similar-animals-row">
                <!-- å‹•æ…‹è¼‰å…¥ç›¸ä¼¼å‹•ç‰© -->
              </div>
            </div>

            <!-- äº’è£œå‹•ç‰©å€åŸŸ -->
            <div class="similar-animals">
              <div class="similar-title">
                ğŸŒŸ äº’è£œé…å°çš„æœ‹å‹
              </div>
              <div class="animal-row" id="complementary-animals-row">
                <!-- å‹•æ…‹è¼‰å…¥äº’è£œå‹•ç‰© -->
              </div>
            </div>

            <!-- ç¤¾äº¤é€£çµæç¤º -->
            <div class="social-connection">
              <div class="connection-text">
                æ‰¾åˆ°è·Ÿä½ ä¸€æ¨£çš„æœ‹å‹äº†å—ï¼Ÿå¿«åˆ†äº«çµ¦ä»–å€‘çœ‹çœ‹ï¼
              </div>
              <div class="connection-tags">
                <span class="connection-tag">#MBTI</span>
                <span class="connection-tag">#å€‹æ€§æ¸¬é©—</span>
                <span class="connection-tag">#å‹•ç‰©å åœ</span>
              </div>
            </div>
            
            <div class="share-section">
              <div class="share-title">ğŸ“± åˆ†äº«ä½ çš„çµæœçµ¦æœ‹å‹å§ï¼</div>
              <div class="share-buttons">
                <button class="share-btn instagram" onclick="shareToInstagram()">
                  ğŸ“· Instagram
                </button>
                <button class="share-btn facebook" onclick="shareToFacebook()">
                  ğŸ“˜ Facebook  
                </button>
                <button class="share-btn twitter" onclick="shareToTwitter()">
                  ğŸ¦ Twitter
                </button>
                <button class="share-btn line" onclick="shareToLine()">
                  ğŸ’¬ LINE
                </button>
                <button class="share-btn copy" onclick="copyResult()">
                  ğŸ“‹ è¤‡è£½é€£çµ
                </button>
              </div>
            </div>
            </div>
          </div>
          
          <!-- æ¢ç´¢æŒ‰éˆ•ç¨ç«‹åœ¨å¤–é¢ -->
          <div style="text-align: center; margin-top: 20px;">
            <button class="explore-btn" onclick="showExploreMore()">
              ğŸ” æ¢ç´¢æ›´å¤šç›¸ä¼¼çš„æ¯›å­©
            </button>
          </div>
        `;
        
        console.log('IG é¢¨æ ¼ HTML å…§å®¹å·²è¨­ç½®');
        
        // ç›´æ¥é¡¯ç¤ºï¼Œä¸ä½¿ç”¨å‹•ç•«
        resultDiv.style.display = 'block';
        resultDiv.style.opacity = '1';
        resultDiv.style.transform = 'translateY(0)';
        
        console.log('çµæœå€åŸŸå·²é¡¯ç¤º');
        
        // è¼‰å…¥ç›¸ä¼¼å’Œäº’è£œå‹•ç‰©
        setTimeout(() => {
          loadSimilarAnimals(mbti, element);
        }, 500);
        
        // æ’­æ”¾çµæœæ­æ›‰éŸ³æ•ˆ
        setTimeout(() => {
          try {
            playCompletionSound();
          } catch (e) {
            console.log('éŸ³æ•ˆæ’­æ”¾å¤±æ•—:', e);
          }
        }, 200);
        
        // å‰µå»ºæ…¶ç¥æ•ˆæœ
        setTimeout(() => {
          try {
            createFloatingHearts(resultDiv);
          } catch (e) {
            console.log('æ„›å¿ƒæ•ˆæœå¤±æ•—:', e);
          }
        }, 500);
        
        // æ»¾å‹•åˆ°çµæœå€åŸŸ
        setTimeout(() => {
          resultDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
          console.log('æ»¾å‹•åˆ°çµæœå€åŸŸ');
        }, 100);
        
      } catch (error) {
        console.error('è¨­ç½®çµæœå…§å®¹æ™‚ç™¼ç”ŸéŒ¯èª¤:', error);
      }
    }
    
    // ç¤¾ç¾¤åª’é«”åˆ†äº«åŠŸèƒ½
    function shareToInstagram() {
      const text = `ğŸ±ğŸ¶ æˆ‘å®Œæˆäº†æ€§æ ¼å‹•ç‰©æ¸¬é©—ï¼\n\næˆ‘æœ€åƒçš„æ˜¯ï¼š${currentUserResult ? getCurrentResultText() : 'ç¥ç§˜å‹•ç‰©'}\n\nMBTI: ${currentUserResult ? currentUserResult.mbti : 'Unknown'} Â· ${currentUserResult ? currentUserResult.element : 'Unknown'}\n\nä½ ä¹Ÿä¾†æ¸¬æ¸¬çœ‹å§ï¼ ğŸŒŸ\n\n#MBTI #æ€§æ ¼æ¸¬é©— #å‹•ç‰©æ€§æ ¼ #å¿ƒç†æ¸¬é©—`;
      
      navigator.clipboard.writeText(text).then(() => {
        showNotification('âœ¨ æ–‡å­—å·²è¤‡è£½ï¼å¿«å» Instagram åˆ†äº«å§ï¼', 'success');
        playClickSound();
      }).catch(() => {
        showNotification('âŒ è¤‡è£½å¤±æ•—ï¼Œè«‹æ‰‹å‹•è¤‡è£½', 'error');
      });
    }
    
    function shareToFacebook() {
      const url = encodeURIComponent(window.location.href);
      const text = encodeURIComponent('ğŸ±ğŸ¶ æˆ‘å®Œæˆäº†æ€§æ ¼å‹•ç‰©æ¸¬é©—ï¼å¿«ä¾†çœ‹çœ‹ä½ æœ€åƒå“ªç¨®æ¯›å­©ï¼');
      const shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${url}&quote=${text}`;
      
      window.open(shareUrl, '_blank', 'width=600,height=400');
      playClickSound();
    }
    
    function shareToTwitter() {
      const url = encodeURIComponent(window.location.href);
      const text = encodeURIComponent(`ğŸ±ğŸ¶ æˆ‘å®Œæˆäº†æ€§æ ¼å‹•ç‰©æ¸¬é©—ï¼æˆ‘æœ€åƒçš„æ˜¯ï¼š${currentUserResult ? getCurrentResultText() : 'ç¥ç§˜å‹•ç‰©'} (${currentUserResult ? currentUserResult.mbti : 'Unknown'} Â· ${currentUserResult ? currentUserResult.element : 'Unknown'}) ä½ ä¹Ÿä¾†æ¸¬æ¸¬çœ‹å§ï¼ ğŸŒŸ #MBTI #æ€§æ ¼æ¸¬é©—`);
      const shareUrl = `https://twitter.com/intent/tweet?text=${text}&url=${url}`;
      
      window.open(shareUrl, '_blank', 'width=600,height=400');
      playClickSound();
    }
    
    function shareToLine() {
      const url = encodeURIComponent(window.location.href);
      const text = encodeURIComponent(`ğŸ±ğŸ¶ æˆ‘å®Œæˆäº†æ€§æ ¼å‹•ç‰©æ¸¬é©—ï¼\næˆ‘æœ€åƒçš„æ˜¯ï¼š${currentUserResult ? getCurrentResultText() : 'ç¥ç§˜å‹•ç‰©'}\nMBTI: ${currentUserResult ? currentUserResult.mbti : 'Unknown'} Â· ${currentUserResult ? currentUserResult.element : 'Unknown'}\nä½ ä¹Ÿä¾†æ¸¬æ¸¬çœ‹å§ï¼ ğŸŒŸ`);
      const shareUrl = `https://social-plugins.line.me/lineit/share?url=${url}&text=${text}`;
      
      window.open(shareUrl, '_blank', 'width=600,height=400');
      playClickSound();
    }
    
    function copyResult() {
      const url = window.location.href;
      const text = `ğŸ±ğŸ¶ æˆ‘å®Œæˆäº†æ€§æ ¼å‹•ç‰©æ¸¬é©—ï¼\n\næˆ‘æœ€åƒçš„æ˜¯ï¼š${currentUserResult ? getCurrentResultText() : 'ç¥ç§˜å‹•ç‰©'}\nMBTI: ${currentUserResult ? currentUserResult.mbti : 'Unknown'} Â· ${currentUserResult ? currentUserResult.element : 'Unknown'}\n\nä½ ä¹Ÿä¾†æ¸¬æ¸¬çœ‹å§ï¼ ğŸŒŸ\n\n${url}`;
      
      navigator.clipboard.writeText(text).then(() => {
        showNotification('ğŸ“‹ çµæœé€£çµå·²è¤‡è£½ï¼', 'success');
        playClickSound();
      }).catch(() => {
        const textArea = document.createElement('textarea');
        textArea.value = text;
        document.body.appendChild(textArea);
        textArea.select();
        try {
          document.execCommand('copy');
          showNotification('ğŸ“‹ çµæœé€£çµå·²è¤‡è£½ï¼', 'success');
          playClickSound();
        } catch (err) {
          showNotification('âŒ è¤‡è£½å¤±æ•—ï¼Œè«‹æ‰‹å‹•è¤‡è£½', 'error');
        }
        document.body.removeChild(textArea);
      });
    }
    
    function getCurrentResultText() {
      if (!currentUserResult) return 'ç¥ç§˜å‹•ç‰©';
      
      const elementMap = {
        'ç«è±¡': 'fire',
        'åœŸè±¡': 'earth', 
        'é¢¨è±¡': 'air',
        'æ°´è±¡': 'water'
      };
      
      const elementKey = elementMap[currentUserResult.element];
      if (quizMapping[currentUserResult.mbti] && quizMapping[currentUserResult.mbti][elementKey]) {
        return quizMapping[currentUserResult.mbti][elementKey].pet;
      }
      
      return 'ç¥ç§˜å‹•ç‰©';
    }
    
    function showNotification(message, type = 'info') {
      const notification = document.createElement('div');
      notification.textContent = message;
      
      notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: ${type === 'success' ? 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' : 'linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%)'};
        color: white;
        padding: 15px 20px;
        border-radius: 12px;
        font-family: 'Inter', 'Noto Sans TC', sans-serif;
        font-size: 0.9rem;
        font-weight: 500;
        box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        z-index: 10000;
        animation: slideInRight 0.3s ease-out;
        max-width: 300px;
        word-wrap: break-word;
      `;
      
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.style.animation = 'slideOutRight 0.3s ease-in forwards';
        setTimeout(() => {
          if (notification.parentNode) {
            notification.parentNode.removeChild(notification);
          }
        }, 300);
      }, 3000);
    }
    
    // é¡¯ç¤ºæ¢ç´¢æ›´å¤šå€åŸŸ
    function showExploreMore() {
      playClickSound();
      
      const exploreDiv = document.getElementById('exploreMore');
      exploreDiv.style.display = 'block';
      
      // åˆå§‹åŒ–ç¯©é¸å™¨
      setupFilters();
      
      // é¡¯ç¤ºæ‰€æœ‰å‹•ç‰©ï¼ˆæŒ‰ç›¸ä¼¼åº¦æ’åºï¼‰
      const filtered = filterAnimals('all', 'all', 'all');
      displayAnimals(filtered, currentUserResult.mbti, currentUserResult.element);
      
      // æ»¾å‹•åˆ°æ¢ç´¢å€åŸŸ
      setTimeout(() => {
        exploreDiv.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }, 300);
    }

    // åˆå§‹åŒ–éŸ³é »ä¸Šä¸‹æ–‡ï¼ˆéœ€è¦ç”¨æˆ¶äº¤äº’ï¼‰
    document.addEventListener('click', function initAudio() {
      if (audioContext.state === 'suspended') {
        audioContext.resume();
      }
      document.removeEventListener('click', initAudio);
    }, { once: true });
    
    // é é¢è¼‰å…¥å®Œæˆå¾Œåˆå§‹åŒ–
    // è¼‰å…¥ç›¸ä¼¼å’Œäº’è£œå‹•ç‰©
    function loadSimilarAnimals(currentMbti, currentElement) {
      console.log('è¼‰å…¥ç›¸ä¼¼å‹•ç‰©ï¼ŒMBTI:', currentMbti, 'å…ƒç´ :', currentElement);
      
      if (!animalData || animalData.length === 0) {
        console.log('å‹•ç‰©è³‡æ–™å°šæœªè¼‰å…¥ï¼Œç­‰å¾…è¼‰å…¥...');
        // ç­‰å¾…å‹•ç‰©è³‡æ–™è¼‰å…¥å¾Œå†æ¬¡å˜—è©¦
        setTimeout(() => {
          if (animalData && animalData.length > 0) {
            loadSimilarAnimals(currentMbti, currentElement);
          }
        }, 1000);
        return;
      }

      console.log('å‹•ç‰©è³‡æ–™å·²è¼‰å…¥ï¼Œå…±', animalData.length, 'å€‹å‹•ç‰©');

      // æ‰¾å‡ºç›¸ä¼¼å‹•ç‰© - ä½¿ç”¨ç°¡åŒ–çš„é‚è¼¯
      const similarAnimals = animalData.filter(animal => {
        if (!animal.mbti || animal.mbti === currentMbti) return false; // æ’é™¤è‡ªå·±å’Œç„¡æ•ˆè³‡æ–™
        
        // å°‡å…ƒç´ è‹±æ–‡è½‰æ›ç‚ºä¸­æ–‡é€²è¡Œæ¯”è¼ƒ
        const elementMap = {
          'fire': 'ç«è±¡',
          'earth': 'åœŸè±¡', 
          'air': 'é¢¨è±¡',
          'water': 'æ°´è±¡'
        };
        const currentElementChinese = elementMap[currentElement];
        
        // ç›¸åŒ MBTI æˆ–ç›¸åŒå…ƒç´ æˆ–ç›¸ä¼¼ç‰¹è³ª
        return (
          animal.mbti === currentMbti ||
          animal.zodiac_element === currentElementChinese ||
          (currentMbti && currentMbti.length >= 4 && animal.mbti.length >= 4 && 
           animal.mbti.substring(1, 3) === currentMbti.substring(1, 3))
        );
      }).slice(0, 3);

      // æ‰¾å‡ºäº’è£œå‹•ç‰©
      const complementaryAnimals = animalData.filter(animal => {
        if (!animal.mbti || animal.mbti === currentMbti) return false; // æ’é™¤è‡ªå·±å’Œç„¡æ•ˆè³‡æ–™
        
        // å°‡å…ƒç´ è‹±æ–‡è½‰æ›ç‚ºä¸­æ–‡é€²è¡Œæ¯”è¼ƒ
        const elementMap = {
          'fire': 'ç«è±¡',
          'earth': 'åœŸè±¡', 
          'air': 'é¢¨è±¡',
          'water': 'æ°´è±¡'
        };
        const currentElementChinese = elementMap[currentElement];
        
        // E/I ç›¸åæˆ–å…ƒç´ äº’è£œ
        if (currentMbti && currentMbti.length >= 1 && animal.mbti.length >= 1) {
          const currentEI = currentMbti[0];
          const animalEI = animal.mbti[0];
          const isOppositeEI = currentEI !== animalEI;
          
          const elementPairs = {
            'ç«è±¡': ['é¢¨è±¡', 'åœŸè±¡'],
            'é¢¨è±¡': ['ç«è±¡', 'æ°´è±¡'],
            'åœŸè±¡': ['ç«è±¡', 'æ°´è±¡'],
            'æ°´è±¡': ['é¢¨è±¡', 'åœŸè±¡']
          };
          const isComplementElement = elementPairs[currentElementChinese]?.includes(animal.zodiac_element);
          
          return isOppositeEI || isComplementElement;
        }
        return false;
      }).slice(0, 3);

      console.log('æ‰¾åˆ°ç›¸ä¼¼å‹•ç‰©:', similarAnimals.length, 'å€‹');
      console.log('æ‰¾åˆ°äº’è£œå‹•ç‰©:', complementaryAnimals.length, 'å€‹');

      // æ¸²æŸ“ç›¸ä¼¼å‹•ç‰©
      const similarRow = document.getElementById('similar-animals-row');
      if (similarRow) {
        if (similarAnimals.length > 0) {
          similarRow.innerHTML = similarAnimals.map(animal => {
            // æ ¹æ“šå‹•ç‰©ç¨®é¡é¸æ“‡è¡¨æƒ…ç¬¦è™Ÿ
            let emoji = 'ğŸ±';
            if (animal.species.includes('ç‹—') || animal.species.includes('Dog')) {
              emoji = 'ğŸ¶';
            } else if (animal.species.includes('è²“') || animal.species.includes('Cat')) {
              emoji = 'ğŸ±';
            } else if (animal.species.includes('å…”')) {
              emoji = 'ğŸ°';
            } else if (animal.species.includes('é³¥')) {
              emoji = 'ğŸ¦';
            }
            
            return `
              <div class="mini-animal">
                <div class="mini-animal-emoji">${emoji}</div>
                <div class="mini-animal-name">${animal.species.split(' ')[0]}</div>
                <div class="mini-animal-type">${animal.mbti}</div>
              </div>
            `;
          }).join('');
          console.log('ç›¸ä¼¼å‹•ç‰©å·²æ¸²æŸ“');
        } else {
          similarRow.innerHTML = '<div style="text-align: center; color: #999; font-size: 0.8rem;">æš«ç„¡ç›¸ä¼¼å‹•ç‰©</div>';
        }
      } else {
        console.log('æ‰¾ä¸åˆ° similar-animals-row å…ƒç´ ');
      }

      // æ¸²æŸ“äº’è£œå‹•ç‰©
      const complementaryRow = document.getElementById('complementary-animals-row');
      if (complementaryRow) {
        if (complementaryAnimals.length > 0) {
          complementaryRow.innerHTML = complementaryAnimals.map(animal => {
            // æ ¹æ“šå‹•ç‰©ç¨®é¡é¸æ“‡è¡¨æƒ…ç¬¦è™Ÿ
            let emoji = 'ğŸ±';
            if (animal.species.includes('ç‹—') || animal.species.includes('Dog')) {
              emoji = 'ğŸ¶';
            } else if (animal.species.includes('è²“') || animal.species.includes('Cat')) {
              emoji = 'ğŸ±';
            } else if (animal.species.includes('å…”')) {
              emoji = 'ğŸ°';
            } else if (animal.species.includes('é³¥')) {
              emoji = 'ğŸ¦';
            }
            
            return `
              <div class="mini-animal">
                <div class="mini-animal-emoji">${emoji}</div>
                <div class="mini-animal-name">${animal.species.split(' ')[0]}</div>
                <div class="mini-animal-type">${animal.zodiac_element}</div>
              </div>
            `;
          }).join('');
          console.log('äº’è£œå‹•ç‰©å·²æ¸²æŸ“');
        } else {
          complementaryRow.innerHTML = '<div style="text-align: center; color: #999; font-size: 0.8rem;">æš«ç„¡äº’è£œå‹•ç‰©</div>';
        }
      } else {
        console.log('æ‰¾ä¸åˆ° complementary-animals-row å…ƒç´ ');
      }
    }

    document.addEventListener('DOMContentLoaded', function() {
      loadAnimalData();
      
      // æ·»åŠ å‹•ç•«æ¨£å¼
      const style = document.createElement('style');
      style.textContent = `
        @keyframes slideInRight {
          from { transform: translateX(100%); opacity: 0; }
          to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes slideOutRight {
          from { transform: translateX(0); opacity: 1; }
          to { transform: translateX(100%); opacity: 0; }
        }
      `;
      document.head.appendChild(style);
    });
  </script>
</body>
</html>
